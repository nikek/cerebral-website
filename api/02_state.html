<!DOCTYPE html><html class="ua_js_no"><head><meta charset="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><title>Cerebral</title><script>(function(e,c){e[c]=e[c].replace(/(ua_js_)no/g,"$1yes");})(document.documentElement,"className");</script><link rel="stylesheet" href="../css/styles.min.css"/><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:700,500,400"/><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto+Mono"/><link rel="shortcut icon" href="../favicon.ico"/><meta name="viewport" content="width=device-width,maximum-scale=1,initial-scale=1,user-scalable=no"/><meta name="format-detection" content="telephone=no"/><link name="apple-mobile-web-app-capable" content="yes"/></head><body class="page page_layout_api"><div class="page__header"><div class="head-nav"><a class="link link__control head-nav__home i-bem" data-bem='{"link":{}}' role="link" href="../"></a></div></div><div class="page__content"><div class="row"><div class="row__col row__col_sw_24 row__col_lw_5"><div class="side-nav"><div class="menu menu_theme_islands menu_size_xl menu_mode_radio menu__control i-bem" data-bem='{"menu":{}}' role="menu" tabindex="0"><div class="menu__group" role="group" aria-labelledby="uniq147500716259522"><div class="menu__group-title" role="presentation" id="uniq147500716259522">Get started</div><div class="menu-item menu-item_type_link menu-item_theme_islands i-bem" data-bem='{"menu-item":{"val":"get-started/01_get-started"}}' role="menuitemradio" id="uniq147500716259523" aria-checked="false"><a class="link link__control i-bem" data-bem='{"link":{}}' role="link" href="../get-started/01_get-started.html">Get started</a></div><div class="menu-item menu-item_type_link menu-item_theme_islands i-bem" data-bem='{"menu-item":{"val":"get-started/02_store-state"}}' role="menuitemradio" id="uniq147500716259524" aria-checked="false"><a class="link link__control i-bem" data-bem='{"link":{}}' role="link" href="../get-started/02_store-state.html">Store state</a></div><div class="menu-item menu-item_type_link menu-item_theme_islands i-bem" data-bem='{"menu-item":{"val":"get-started/03_render-state"}}' role="menuitemradio" id="uniq147500716259525" aria-checked="false"><a class="link link__control i-bem" data-bem='{"link":{}}' role="link" href="../get-started/03_render-state.html">Render state</a></div><div class="menu-item menu-item_type_link menu-item_theme_islands i-bem" data-bem='{"menu-item":{"val":"get-started/04_update-state"}}' role="menuitemradio" id="uniq147500716259526" aria-checked="false"><a class="link link__control i-bem" data-bem='{"link":{}}' role="link" href="../get-started/04_update-state.html">Update state</a></div><div class="menu-item menu-item_type_link menu-item_theme_islands i-bem" data-bem='{"menu-item":{"val":"get-started/05_challenge"}}' role="menuitemradio" id="uniq147500716259527" aria-checked="false"><a class="link link__control i-bem" data-bem='{"link":{}}' role="link" href="../get-started/05_challenge.html">Challenge</a></div></div><div class="menu__group" role="group" aria-labelledby="uniq147500716259528"><div class="menu__group-title" role="presentation" id="uniq147500716259528">Concepts</div><div class="menu-item menu-item_type_link menu-item_theme_islands i-bem" data-bem='{"menu-item":{"val":"concepts/01_the-architecture"}}' role="menuitemradio" id="uniq147500716259529" aria-checked="false"><a class="link link__control i-bem" data-bem='{"link":{}}' role="link" href="../concepts/01_the-architecture.html">The architecture</a></div><div class="menu-item menu-item_type_link menu-item_theme_islands i-bem" data-bem='{"menu-item":{"val":"concepts/02_signals"}}' role="menuitemradio" id="uniq147500716259530" aria-checked="false"><a class="link link__control i-bem" data-bem='{"link":{}}' role="link" href="../concepts/02_signals.html">Signals</a></div><div class="menu-item menu-item_type_link menu-item_theme_islands i-bem" data-bem='{"menu-item":{"val":"concepts/03_composition"}}' role="menuitemradio" id="uniq147500716259531" aria-checked="false"><a class="link link__control i-bem" data-bem='{"link":{}}' role="link" href="../concepts/03_composition.html">Composition</a></div><div class="menu-item menu-item_type_link menu-item_theme_islands i-bem" data-bem='{"menu-item":{"val":"concepts/04_namespacing"}}' role="menuitemradio" id="uniq147500716259532" aria-checked="false"><a class="link link__control i-bem" data-bem='{"link":{}}' role="link" href="../concepts/04_namespacing.html">Namespacing</a></div></div><div class="menu__group" role="group" aria-labelledby="uniq147500716259533"><div class="menu__group-title" role="presentation" id="uniq147500716259533">Getting real</div><div class="menu-item menu-item_type_link menu-item_theme_islands i-bem" data-bem='{"menu-item":{"val":"getting-real/01_organizing"}}' role="menuitemradio" id="uniq147500716259534" aria-checked="false"><a class="link link__control i-bem" data-bem='{"link":{}}' role="link" href="../getting-real/01_organizing.html">Organizing</a></div><div class="menu-item menu-item_type_link menu-item_theme_islands i-bem" data-bem='{"menu-item":{"val":"getting-real/02_routing"}}' role="menuitemradio" id="uniq147500716259535" aria-checked="false"><a class="link link__control i-bem" data-bem='{"link":{}}' role="link" href="../getting-real/02_routing.html">Routing</a></div></div><div class="menu__group" role="group" aria-labelledby="uniq147500716259536"><div class="menu__group-title" role="presentation" id="uniq147500716259536">API</div><div class="menu-item menu-item_type_link menu-item_theme_islands i-bem" data-bem='{"menu-item":{"val":"api/01_controller"}}' role="menuitemradio" id="uniq147500716259537" aria-checked="false"><a class="link link__control i-bem" data-bem='{"link":{}}' role="link" href="../api/01_controller.html">Controller</a></div><div class="menu-item menu-item_type_link menu-item_checked menu-item_theme_islands i-bem" data-bem='{"menu-item":{"val":"api/02_state"}}' role="menuitemradio" id="uniq147500716259538" aria-checked="true"><a class="link link__control i-bem" data-bem='{"link":{}}' role="link" href="../api/02_state.html">State</a></div><div class="menu-item menu-item_type_link menu-item_theme_islands i-bem" data-bem='{"menu-item":{"val":"api/03_signals"}}' role="menuitemradio" id="uniq147500716259539" aria-checked="false"><a class="link link__control i-bem" data-bem='{"link":{}}' role="link" href="../api/03_signals.html">Signals</a></div><div class="menu-item menu-item_type_link menu-item_theme_islands i-bem" data-bem='{"menu-item":{"val":"api/04_modules"}}' role="menuitemradio" id="uniq147500716259540" aria-checked="false"><a class="link link__control i-bem" data-bem='{"link":{}}' role="link" href="../api/04_modules.html">Modules</a></div><div class="menu-item menu-item_type_link menu-item_theme_islands i-bem" data-bem='{"menu-item":{"val":"api/05_operators"}}' role="menuitemradio" id="uniq147500716259541" aria-checked="false"><a class="link link__control i-bem" data-bem='{"link":{}}' role="link" href="../api/05_operators.html">Operators</a></div><div class="menu-item menu-item_type_link menu-item_theme_islands i-bem" data-bem='{"menu-item":{"val":"api/06_providers"}}' role="menuitemradio" id="uniq147500716259542" aria-checked="false"><a class="link link__control i-bem" data-bem='{"link":{}}' role="link" href="../api/06_providers.html">Providers</a></div></div></div></div></div><div class="row__col row__col_sw_24 row__col_lw_18 row__col_lo_1"><div class="page__edit"><a class="link link_theme_islands link__control i-bem" data-bem='{"link":{}}' role="link" href="https://github.com/cerebral/cerebral-website/edit/v3/content/api/02_state.en.md">Edit on GitHub</a></div><h2 class="heading heading_lvl_2" id="state">State</h2>
<p class="paragraph">State can be defined at the top level in the controller or in each module. State is defined as plain JavaScript value types. Arrays, objects, strings, numbers and booleans. This means that the state is serializable. There are not classes or other abstractions around state. This makes it easier to reason about how state is translated into user interface, it can be stored on server/local storage and the debugger can now visualize all the state of the application.</p>
<pre><code class="code" class="lang-js"><span class="token keyword" >import</span> <span class="token punctuation" >{</span>Controller<span class="token punctuation" >}</span> <span class="token keyword" >from</span> <span class="token string" >'cerebral'</span>

<span class="token keyword" >const</span> controller <span class="token operator" >=</span> <span class="token function" >Controller</span><span class="token punctuation" >(</span><span class="token punctuation" >{</span>
  state<span class="token punctuation" >:</span> <span class="token punctuation" >{</span>
    foo<span class="token punctuation" >:</span> <span class="token string" >'bar'</span><span class="token punctuation" >,</span>
    items<span class="token punctuation" >:</span> <span class="token punctuation" >[</span><span class="token punctuation" >{</span>
      name<span class="token punctuation" >:</span> <span class="token string" >'foo'</span>
    <span class="token punctuation" >}</span><span class="token punctuation" >,</span> <span class="token punctuation" >{</span>
      name<span class="token punctuation" >:</span> <span class="token string" >'bar'</span>
    <span class="token punctuation" >}</span><span class="token punctuation" >]</span>
  <span class="token punctuation" >}</span>
<span class="token punctuation" >}</span><span class="token punctuation" >)</span>
</code></pre>
<h3 class="heading heading_lvl_3" id="get-state">Get state</h3>
<p class="paragraph">The only way to get state in your application is by connecting it to a component or grabbing it in an action.</p>
<pre><code class="code" class="lang-js"><span class="token keyword" >function</span> <span class="token function" >someAction</span><span class="token punctuation" >(</span><span class="token punctuation" >{</span>state<span class="token punctuation" >}</span><span class="token punctuation" >)</span> <span class="token punctuation" >{</span>
  <span class="token comment" spellcheck="true">// Get all state</span>
  state<span class="token punctuation" >.</span><span class="token keyword" >get</span><span class="token punctuation" >(</span><span class="token punctuation" >)</span>
  <span class="token comment" spellcheck="true">// Get by path</span>
  state<span class="token punctuation" >.</span><span class="token keyword" >get</span><span class="token punctuation" >(</span><span class="token string" >'some.path'</span><span class="token punctuation" >)</span>
<span class="token punctuation" >}</span>
</code></pre>
<h3 class="heading heading_lvl_3" id="updating-state">Updating state</h3>
<p class="paragraph">The only way to update the state of your application is in an action. Here is a list of all possible state mutations you can do:</p>
<pre><code class="code" class="lang-js"><span class="token keyword" >function</span> <span class="token function" >someAction</span><span class="token punctuation" >(</span><span class="token punctuation" >{</span>state<span class="token punctuation" >}</span><span class="token punctuation" >)</span> <span class="token punctuation" >{</span>
  <span class="token comment" spellcheck="true">// Set or replace a value</span>
  state<span class="token punctuation" >.</span><span class="token keyword" >set</span><span class="token punctuation" >(</span><span class="token string" >'some.path'</span><span class="token punctuation" >,</span> <span class="token string" >'someValue'</span><span class="token punctuation" >)</span>
  <span class="token comment" spellcheck="true">// Unset a key and its value</span>
  state<span class="token punctuation" >.</span><span class="token function" >unset</span><span class="token punctuation" >(</span><span class="token string" >'some.path'</span><span class="token punctuation" >)</span>
  <span class="token comment" spellcheck="true">// Merge the keys and their values into existing object. Handled as a</span>
  <span class="token comment" spellcheck="true">// change on all paths merged in</span>
  state<span class="token punctuation" >.</span><span class="token function" >merge</span><span class="token punctuation" >(</span><span class="token string" >'some.path'</span><span class="token punctuation" >,</span> <span class="token punctuation" >{</span>
    some<span class="token punctuation" >:</span> <span class="token string" >'value'</span>
  <span class="token punctuation" >}</span><span class="token punctuation" >)</span>
  <span class="token comment" spellcheck="true">// Pushes a value to the end of the array</span>
  state<span class="token punctuation" >.</span><span class="token function" >push</span><span class="token punctuation" >(</span><span class="token string" >'some.path'</span><span class="token punctuation" >,</span> <span class="token string" >'someValue'</span><span class="token punctuation" >)</span>
  <span class="token comment" spellcheck="true">// Puts the value at the beginning of the array</span>
  state<span class="token punctuation" >.</span><span class="token function" >unshift</span><span class="token punctuation" >(</span><span class="token string" >'some.path'</span><span class="token punctuation" >,</span> <span class="token string" >'someValue'</span><span class="token punctuation" >)</span>
  <span class="token comment" spellcheck="true">// Removes last item in array</span>
  state<span class="token punctuation" >.</span><span class="token function" >pop</span><span class="token punctuation" >(</span><span class="token string" >'some.path'</span><span class="token punctuation" >)</span>
  <span class="token comment" spellcheck="true">// Removes first item in array</span>
  state<span class="token punctuation" >.</span><span class="token function" >shift</span><span class="token punctuation" >(</span><span class="token string" >'some.path'</span><span class="token punctuation" >)</span>
  <span class="token comment" spellcheck="true">// Concats passed array to existing array</span>
  state<span class="token punctuation" >.</span><span class="token function" >concat</span><span class="token punctuation" >(</span><span class="token string" >'some.path'</span><span class="token punctuation" >,</span> <span class="token punctuation" >[</span><span class="token string" >'someValueA'</span><span class="token punctuation" >,</span> <span class="token string" >'someValueB'</span><span class="token punctuation" >]</span><span class="token punctuation" >)</span>
  <span class="token comment" spellcheck="true">// Splices arrays</span>
  state<span class="token punctuation" >.</span><span class="token function" >splice</span><span class="token punctuation" >(</span><span class="token string" >'some.path'</span><span class="token punctuation" >,</span> <span class="token number" >2</span><span class="token punctuation" >,</span> <span class="token number" >1</span><span class="token punctuation" >)</span>
<span class="token punctuation" >}</span>
</code></pre>
</div></div></div><footer class="footer page__footer"><div class="row"><div class="row__col row__col_sw_24 row__col_lw_6"><h4 class="footer__header">ORGANIZATION</h4><a class="link link__control footer__link i-bem" data-bem='{"link":{}}' role="link" href="../contributors">Contributors</a></div><div class="row__col row__col_sw_24 row__col_lw_6 row__col_lo_3"><h4 class="footer__header">ARTICLES AND USEFUL LINKS</h4></div><div class="row__col row__col_sw_24 row__col_lw_6 row__col_lo_6"><h4 class="footer__header">HELP</h4></div></div></footer><script src="../js/scripts.min.js"></script></body></html>