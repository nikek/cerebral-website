<!DOCTYPE html><html class="ua_js_no"><head><meta charset="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><title>Cerebral</title><script>(function(e,c){e[c]=e[c].replace(/(ua_js_)no/g,"$1yes");})(document.documentElement,"className");</script><link rel="stylesheet" href="../css/styles.min.css"/><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:700,500,400"/><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto+Mono"/><link rel="shortcut icon" href="../favicon.ico"/><meta name="viewport" content="width=device-width,maximum-scale=1,initial-scale=1,user-scalable=no"/><meta name="format-detection" content="telephone=no"/><link name="apple-mobile-web-app-capable" content="yes"/></head><body class="page page_layout_api"><div class="page__header"><div class="head-nav"><a class="link link__control head-nav__home i-bem" data-bem='{"link":{}}' role="link" href="../"></a></div></div><div class="page__content"><div class="wip">This documentation is about upcoming cerebral v2 which is currently is work in progress.<br/>Documentation might not always describe actual state of API.<br/>API itself could have some notable changes, though it shouldn't be critical.<br/>Feel free to contribute to docs by clicking Edit on Github link.</div><div class="row"><div class="row__col row__col_sw_24 row__col_lw_5 row__col_sol row__col_mol"><div class="side-nav"><div class="menu menu_theme_islands menu_size_xl menu_mode_radio-check menu__control i-bem" data-bem='{"menu":{}}' role="menu" tabindex="0"><div class="menu__group" role="group" aria-labelledby="uniq1477300328024161"><div class="menu__group-title" role="presentation" id="uniq1477300328024161">Get started</div><div class="menu-item menu-item_type_link menu-item_theme_islands i-bem" data-bem='{"menu-item":{"val":"get-started/01_get-started"}}' role="menuitemradio" id="uniq1477300328024162" aria-checked="false"><a class="link link__control i-bem" data-bem='{"link":{}}' role="link" href="../get-started/01_get-started.html">Get started</a></div><div class="menu-item menu-item_type_link menu-item_theme_islands i-bem" data-bem='{"menu-item":{"val":"get-started/02_store-state"}}' role="menuitemradio" id="uniq1477300328024163" aria-checked="false"><a class="link link__control i-bem" data-bem='{"link":{}}' role="link" href="../get-started/02_store-state.html">Store state</a></div><div class="menu-item menu-item_type_link menu-item_theme_islands i-bem" data-bem='{"menu-item":{"val":"get-started/03_render-state"}}' role="menuitemradio" id="uniq1477300328024164" aria-checked="false"><a class="link link__control i-bem" data-bem='{"link":{}}' role="link" href="../get-started/03_render-state.html">Render state</a></div><div class="menu-item menu-item_type_link menu-item_theme_islands i-bem" data-bem='{"menu-item":{"val":"get-started/04_update-state"}}' role="menuitemradio" id="uniq1477300328024165" aria-checked="false"><a class="link link__control i-bem" data-bem='{"link":{}}' role="link" href="../get-started/04_update-state.html">Update state</a></div><div class="menu-item menu-item_type_link menu-item_theme_islands i-bem" data-bem='{"menu-item":{"val":"get-started/05_challenge"}}' role="menuitemradio" id="uniq1477300328024166" aria-checked="false"><a class="link link__control i-bem" data-bem='{"link":{}}' role="link" href="../get-started/05_challenge.html">Challenge</a></div></div><div class="menu__group" role="group" aria-labelledby="uniq1477300328024167"><div class="menu__group-title" role="presentation" id="uniq1477300328024167">Concepts</div><div class="menu-item menu-item_type_link menu-item_theme_islands i-bem" data-bem='{"menu-item":{"val":"concepts/01_the-architecture"}}' role="menuitemradio" id="uniq1477300328024168" aria-checked="false"><a class="link link__control i-bem" data-bem='{"link":{}}' role="link" href="../concepts/01_the-architecture.html">The architecture</a></div><div class="menu-item menu-item_type_link menu-item_theme_islands i-bem" data-bem='{"menu-item":{"val":"concepts/02_signals"}}' role="menuitemradio" id="uniq1477300328024169" aria-checked="false"><a class="link link__control i-bem" data-bem='{"link":{}}' role="link" href="../concepts/02_signals.html">Signals</a></div><div class="menu-item menu-item_type_link menu-item_theme_islands i-bem" data-bem='{"menu-item":{"val":"concepts/03_composition"}}' role="menuitemradio" id="uniq1477300328024170" aria-checked="false"><a class="link link__control i-bem" data-bem='{"link":{}}' role="link" href="../concepts/03_composition.html">Composition</a></div><div class="menu-item menu-item_type_link menu-item_theme_islands i-bem" data-bem='{"menu-item":{"val":"concepts/04_namespacing"}}' role="menuitemradio" id="uniq1477300328024171" aria-checked="false"><a class="link link__control i-bem" data-bem='{"link":{}}' role="link" href="../concepts/04_namespacing.html">Namespacing</a></div><div class="menu-item menu-item_type_link menu-item_theme_islands i-bem" data-bem='{"menu-item":{"val":"concepts/05_exposing-state"}}' role="menuitemradio" id="uniq1477300328024172" aria-checked="false"><a class="link link__control i-bem" data-bem='{"link":{}}' role="link" href="../concepts/05_exposing-state.html">Exposing state</a></div></div><div class="menu__group" role="group" aria-labelledby="uniq1477300328024173"><div class="menu__group-title" role="presentation" id="uniq1477300328024173">Getting real</div><div class="menu-item menu-item_type_link menu-item_theme_islands i-bem" data-bem='{"menu-item":{"val":"getting-real/01_community-tools"}}' role="menuitemradio" id="uniq1477300328024174" aria-checked="false"><a class="link link__control i-bem" data-bem='{"link":{}}' role="link" href="../getting-real/01_community-tools.html">Community tools</a></div><div class="menu-item menu-item_type_link menu-item_theme_islands i-bem" data-bem='{"menu-item":{"val":"getting-real/02_organizing"}}' role="menuitemradio" id="uniq1477300328024175" aria-checked="false"><a class="link link__control i-bem" data-bem='{"link":{}}' role="link" href="../getting-real/02_organizing.html">Organizing</a></div><div class="menu-item menu-item_type_link menu-item_theme_islands i-bem" data-bem='{"menu-item":{"val":"getting-real/03_adding-providers"}}' role="menuitemradio" id="uniq1477300328024176" aria-checked="false"><a class="link link__control i-bem" data-bem='{"link":{}}' role="link" href="../getting-real/03_adding-providers.html">Adding providers</a></div><div class="menu-item menu-item_type_link menu-item_theme_islands i-bem" data-bem='{"menu-item":{"val":"getting-real/03_devtools"}}' role="menuitemradio" id="uniq1477300328024177" aria-checked="false"><a class="link link__control i-bem" data-bem='{"link":{}}' role="link" href="../getting-real/03_devtools.html">Devtools</a></div><div class="menu-item menu-item_type_link menu-item_theme_islands i-bem" data-bem='{"menu-item":{"val":"getting-real/05_compute-state"}}' role="menuitemradio" id="uniq1477300328024178" aria-checked="false"><a class="link link__control i-bem" data-bem='{"link":{}}' role="link" href="../getting-real/05_compute-state.html">Compute state</a></div><div class="menu-item menu-item_type_link menu-item_theme_islands i-bem" data-bem='{"menu-item":{"val":"getting-real/06_connecting-to-components"}}' role="menuitemradio" id="uniq1477300328024179" aria-checked="false"><a class="link link__control i-bem" data-bem='{"link":{}}' role="link" href="../getting-real/06_connecting-to-components.html">Connecting to components</a></div><div class="menu-item menu-item_type_link menu-item_theme_islands i-bem" data-bem='{"menu-item":{"val":"getting-real/07_routing"}}' role="menuitemradio" id="uniq1477300328024180" aria-checked="false"><a class="link link__control i-bem" data-bem='{"link":{}}' role="link" href="../getting-real/07_routing.html">Routing</a></div><div class="menu-item menu-item_type_link menu-item_theme_islands i-bem" data-bem='{"menu-item":{"val":"getting-real/08_constants"}}' role="menuitemradio" id="uniq1477300328024181" aria-checked="false"><a class="link link__control i-bem" data-bem='{"link":{}}' role="link" href="../getting-real/08_constants.html">Constants</a></div><div class="menu-item menu-item_type_link menu-item_theme_islands i-bem" data-bem='{"menu-item":{"val":"getting-real/09_server-side"}}' role="menuitemradio" id="uniq1477300328024182" aria-checked="false"><a class="link link__control i-bem" data-bem='{"link":{}}' role="link" href="../getting-real/09_server-side.html">Server side</a></div><div class="menu-item menu-item_type_link menu-item_theme_islands i-bem" data-bem='{"menu-item":{"val":"getting-real/10_testing"}}' role="menuitemradio" id="uniq1477300328024183" aria-checked="false"><a class="link link__control i-bem" data-bem='{"link":{}}' role="link" href="../getting-real/10_testing.html">Testing</a></div></div><div class="menu__group" role="group" aria-labelledby="uniq1477300328024184"><div class="menu__group-title" role="presentation" id="uniq1477300328024184">API</div><div class="menu-item menu-item_type_link menu-item_theme_islands i-bem" data-bem='{"menu-item":{"val":"api/01_controller"}}' role="menuitemradio" id="uniq1477300328024185" aria-checked="false"><a class="link link__control i-bem" data-bem='{"link":{}}' role="link" href="../api/01_controller.html">Controller</a></div><div class="menu-item menu-item_type_link menu-item_theme_islands i-bem" data-bem='{"menu-item":{"val":"api/02_state"}}' role="menuitemradio" id="uniq1477300328024186" aria-checked="false"><a class="link link__control i-bem" data-bem='{"link":{}}' role="link" href="../api/02_state.html">State</a></div><div class="menu-item menu-item_type_link menu-item_theme_islands i-bem" data-bem='{"menu-item":{"val":"api/03_signals"}}' role="menuitemradio" id="uniq1477300328024187" aria-checked="false"><a class="link link__control i-bem" data-bem='{"link":{}}' role="link" href="../api/03_signals.html">Signals</a></div><div class="menu-item menu-item_type_link menu-item_theme_islands i-bem" data-bem='{"menu-item":{"val":"api/04_modules"}}' role="menuitemradio" id="uniq1477300328024188" aria-checked="false"><a class="link link__control i-bem" data-bem='{"link":{}}' role="link" href="../api/04_modules.html">Modules</a></div><div class="menu-item menu-item_type_link menu-item_theme_islands i-bem" data-bem='{"menu-item":{"val":"api/05_operators"}}' role="menuitemradio" id="uniq1477300328024189" aria-checked="false"><a class="link link__control i-bem" data-bem='{"link":{}}' role="link" href="../api/05_operators.html">Operators</a></div><div class="menu-item menu-item_type_link menu-item_checked menu-item_theme_islands i-bem" data-bem='{"menu-item":{"val":"api/06_providers"}}' role="menuitemradio" id="uniq1477300328024190" aria-checked="true"><a class="link link__control i-bem" data-bem='{"link":{}}' role="link" href="../api/06_providers.html">Providers</a></div><div class="menu-item menu-item_type_link menu-item_theme_islands i-bem" data-bem='{"menu-item":{"val":"api/07_connect"}}' role="menuitemradio" id="uniq1477300328024191" aria-checked="false"><a class="link link__control i-bem" data-bem='{"link":{}}' role="link" href="../api/07_connect.html">Connect</a></div><div class="menu-item menu-item_type_link menu-item_theme_islands i-bem" data-bem='{"menu-item":{"val":"api/08_router"}}' role="menuitemradio" id="uniq1477300328024192" aria-checked="false"><a class="link link__control i-bem" data-bem='{"link":{}}' role="link" href="../api/08_router.html">Router</a></div></div></div></div></div><div class="row__col row__col_sw_24 row__col_lw_18 row__col_lo_1"><div class="page__edit"><a class="link link_theme_islands link__control i-bem" data-bem='{"link":{}}' role="link" href="https://github.com/cerebral/cerebral-website/blob/v3/content/api/06_providers.en.md">Edit on GitHub</a></div><h2 class="heading heading_lvl_2" id="providers">Providers</h2>
<p class="paragraph">Providers are functions that runs before any action in any signal. Their purpose is to define and sometimes manipulate the context passed into every action. The providers run before every action, meaning that each action has a unique context object.</p>
<h3 class="heading heading_lvl_3" id="context-provider">Context provider</h3>
<p class="paragraph">The context provider allows you to attach any third party library to the context of all actions. Typically:</p>
<pre><code class="code" class="lang-js"><span class="token keyword" >import</span> <span class="token punctuation" >{</span>Controller<span class="token punctuation" >}</span> <span class="token keyword" >from</span> <span class="token string" >'cerebral'</span>
<span class="token keyword" >import</span> ContextProvider <span class="token keyword" >from</span> <span class="token string" >'cerebral/providers/Context'</span>
<span class="token keyword" >import</span> axios <span class="token keyword" >from</span> <span class="token string" >'axios'</span>

<span class="token keyword" >const</span> controller <span class="token operator" >=</span> <span class="token function" >Controller</span><span class="token punctuation" >(</span><span class="token punctuation" >{</span>
  providers<span class="token punctuation" >:</span> <span class="token punctuation" >[</span>
    <span class="token function" >ContextProvider</span><span class="token punctuation" >(</span><span class="token punctuation" >{</span>
      axios
    <span class="token punctuation" >}</span><span class="token punctuation" >)</span>
  <span class="token punctuation" >]</span>
<span class="token punctuation" >}</span><span class="token punctuation" >)</span>
</code></pre>
<p class="paragraph">Now axios will be available on the context of any action. The context provider also wraps any methods and sends information to the debugger about their use.</p>
<p class="paragraph">Look at the <a class="link link__control i-bem" data-bem='{"link":{}}' role="link" tabindex="0" href="">community tools</a> for other providers that can be used, or create your own.</p>
<h3 class="heading heading_lvl_3" id="creating-a-provider">Creating a provider</h3>
<p class="paragraph">An example of a provider is the built in <strong>InputProvider</strong> of function-tree.</p>
<p class="paragraph">It looks something like this:</p>
<pre><code class="code" class="lang-js"><span class="token keyword" >function</span> <span class="token function" >InputProvider</span><span class="token punctuation" >(</span>context<span class="token punctuation" >,</span> functionDetails<span class="token punctuation" >,</span> payload<span class="token punctuation" >)</span> <span class="token punctuation" >{</span>
  context<span class="token punctuation" >.</span>input <span class="token operator" >=</span> payload

  <span class="token keyword" >return</span> context
<span class="token punctuation" >}</span>
</code></pre>
<p class="paragraph">The providers are called by <strong>function-tree</strong> with some arguments.</p>
<ul class="list">
<li class="list__item"><strong>context</strong> is the current context object that will be passed into the function (action)</li>
<li class="list__item"><strong>functionDetails</strong> gives information about the function (action) that will run</li>
<li class="list__item"><strong>payload</strong> the current payload of the execution (signal)</li>
</ul>
<p class="paragraph">You can create a standalone provider simply by defining a function like the <strong>InputProvider</strong> in the first example. But you can also define a provider on a module. This allows you to combine providers with signal execution.</p>
<pre><code class="code" class="lang-js"><span class="token keyword" >export</span> <span class="token keyword" >default</span> <span class="token punctuation" >(</span>module<span class="token punctuation" >)</span> <span class="token operator" >=</span><span class="token operator" >></span> <span class="token punctuation" >{</span>
  <span class="token keyword" >return</span> <span class="token punctuation" >{</span>
    state<span class="token punctuation" >:</span> <span class="token punctuation" >{</span>
      foo<span class="token punctuation" >:</span> <span class="token string" >'bar'</span>
    <span class="token punctuation" >}</span><span class="token punctuation" >,</span>
    signals<span class="token punctuation" >:</span> <span class="token punctuation" >{</span>
      providerTriggered<span class="token punctuation" >:</span> <span class="token punctuation" >[</span>
        <span class="token function" >toggle</span><span class="token punctuation" >(</span><span class="token template-string" ><span class="token string" >`state:</span><span class="token interpolation" ><span class="token interpolation-punctuation punctuation" >${</span>module<span class="token punctuation" >.</span>path<span class="token punctuation" >.</span><span class="token function" >join</span><span class="token punctuation" >(</span><span class="token string" >'.'</span><span class="token punctuation" >)</span><span class="token interpolation-punctuation punctuation" >}</span></span><span class="token string" >.foo`</span></span><span class="token punctuation" >)</span>
      <span class="token punctuation" >]</span>
    <span class="token punctuation" >}</span><span class="token punctuation" >,</span>
    <span class="token function" >provider</span><span class="token punctuation" >(</span>context<span class="token punctuation" >)</span> <span class="token punctuation" >{</span>
      context<span class="token punctuation" >.</span>toggleFoo <span class="token operator" >=</span> module<span class="token punctuation" >.</span><span class="token function" >getSignal</span><span class="token punctuation" >(</span><span class="token string" >'providerTriggered'</span><span class="token punctuation" >)</span><span class="token punctuation" >(</span><span class="token punctuation" >)</span>

      <span class="token keyword" >return</span> context
    <span class="token punctuation" >}</span>
  <span class="token punctuation" >}</span>
<span class="token punctuation" >}</span>
</code></pre>
<p class="paragraph">Now any action can:</p>
<pre><code class="code" class="lang-js"><span class="token keyword" >function</span> <span class="token function" >someAction</span><span class="token punctuation" >(</span><span class="token punctuation" >{</span>toggleFoo<span class="token punctuation" >}</span><span class="token punctuation" >)</span> <span class="token punctuation" >{</span>
  <span class="token function" >toggleFoo</span><span class="token punctuation" >(</span><span class="token punctuation" >)</span>
<span class="token punctuation" >}</span>
</code></pre>
<p class="paragraph">You should think twice when considering a provider though. Always favor signal composition and actions as those will always end up more readable and better visualized in the debugger. Providers are typically used for general enhancements, not application specific.</p>
<h3 class="heading heading_lvl_3" id="already-on-the-context">Already on the context</h3>
<p class="paragraph">There are some things already available on the context.</p>
<pre><code class="code" class="lang-js"><span class="token keyword" >function</span> <span class="token function" >MyProvider</span><span class="token punctuation" >(</span>context<span class="token punctuation" >)</span> <span class="token punctuation" >{</span>
  context<span class="token punctuation" >.</span>execution <span class="token comment" spellcheck="true">// Information on the function tree execution</span>
  context<span class="token punctuation" >.</span>controller <span class="token comment" spellcheck="true">// The Cerebral controller</span>
  context<span class="token punctuation" >.</span><span class="token keyword" >debugger</span> <span class="token comment" spellcheck="true">// If devtools is added, you can send messages to the debugger</span>
  context<span class="token punctuation" >.</span>input <span class="token comment" spellcheck="true">// Current payload</span>
  context<span class="token punctuation" >.</span>path <span class="token comment" spellcheck="true">// If any paths are defined after the action to be executed</span>

  <span class="token keyword" >return</span> context
<span class="token punctuation" >}</span>
</code></pre>
</div></div></div><footer class="footer page__footer"><div class="row"><div class="row__col row__col_sw_24 row__col_lw_6"><h4 class="footer__header">ORGANIZATION</h4><a class="link link__control footer__link i-bem" data-bem='{"link":{}}' role="link" href="../contributors">Contributors</a><a class="link link__control footer__link i-bem" data-bem='{"link":{}}' role="link" href="http://www.webpackbin.com">www.webpackbin.com</a><a class="link link__control footer__link i-bem" data-bem='{"link":{}}' role="link" href="http://www.christianalfoni.com">www.christianalfoni.com</a></div><div class="row__col row__col_sw_24 row__col_lw_6 row__col_lo_3"><h4 class="footer__header">ARTICLES AND USEFUL LINKS</h4><a class="link link__control footer__link i-bem" data-bem='{"link":{}}' role="link" href="http://medium.com/p/5793c08db2cc">The story of Cerebral</a><a class="link link__control footer__link i-bem" data-bem='{"link":{}}' role="link" href="https://gist.github.com/christianalfoni/b08a99faa09df054afe87528a2134730">An unlikely success story</a></div><div class="row__col row__col_sw_24 row__col_lw_6 row__col_lo_6"><h4 class="footer__header">HELP</h4><a class="link link__control footer__link i-bem" data-bem='{"link":{}}' role="link" href="https://github.com/cerebral/cerebral">Cerebral github repo</a><a class="link link__control footer__link i-bem" data-bem='{"link":{}}' role="link" href="https://discord.gg/0kIweV4bd2bwwsvH">Discord chat</a></div></div></footer><script src="../js/scripts.min.js"></script></body></html>