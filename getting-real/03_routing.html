<!DOCTYPE html><html class="ua_js_no"><head><meta charset="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><title>Cerebral</title><script>(function(e,c){e[c]=e[c].replace(/(ua_js_)no/g,"$1yes");})(document.documentElement,"className");</script><link rel="stylesheet" href="../css/styles.min.css"/><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:700,500,400"/><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto+Mono"/><link rel="shortcut icon" href="../favicon.ico"/><meta name="viewport" content="width=device-width,maximum-scale=1,initial-scale=1,user-scalable=no"/><meta name="format-detection" content="telephone=no"/><link name="apple-mobile-web-app-capable" content="yes"/></head><body class="page page_layout_getting-real"><div class="page__header"><div class="head-nav"><a class="link link__control head-nav__home i-bem" data-bem='{"link":{}}' role="link" href="../"></a></div></div><div class="page__content"><div class="row"><div class="row__col row__col_sw_24 row__col_lw_5"><div class="side-nav"><div class="menu menu_theme_islands menu_size_xl menu_mode_radio menu__control i-bem" data-bem='{"menu":{}}' role="menu" tabindex="0"><div class="menu__group" role="group" aria-labelledby="uniq1475014812187576"><div class="menu__group-title" role="presentation" id="uniq1475014812187576">Get started</div><div class="menu-item menu-item_type_link menu-item_theme_islands i-bem" data-bem='{"menu-item":{"val":"get-started/01_get-started"}}' role="menuitemradio" id="uniq1475014812187577" aria-checked="false"><a class="link link__control i-bem" data-bem='{"link":{}}' role="link" href="../get-started/01_get-started.html">Get started</a></div><div class="menu-item menu-item_type_link menu-item_theme_islands i-bem" data-bem='{"menu-item":{"val":"get-started/02_store-state"}}' role="menuitemradio" id="uniq1475014812187578" aria-checked="false"><a class="link link__control i-bem" data-bem='{"link":{}}' role="link" href="../get-started/02_store-state.html">Store state</a></div><div class="menu-item menu-item_type_link menu-item_theme_islands i-bem" data-bem='{"menu-item":{"val":"get-started/03_render-state"}}' role="menuitemradio" id="uniq1475014812187579" aria-checked="false"><a class="link link__control i-bem" data-bem='{"link":{}}' role="link" href="../get-started/03_render-state.html">Render state</a></div><div class="menu-item menu-item_type_link menu-item_theme_islands i-bem" data-bem='{"menu-item":{"val":"get-started/04_update-state"}}' role="menuitemradio" id="uniq1475014812187580" aria-checked="false"><a class="link link__control i-bem" data-bem='{"link":{}}' role="link" href="../get-started/04_update-state.html">Update state</a></div><div class="menu-item menu-item_type_link menu-item_theme_islands i-bem" data-bem='{"menu-item":{"val":"get-started/05_challenge"}}' role="menuitemradio" id="uniq1475014812187581" aria-checked="false"><a class="link link__control i-bem" data-bem='{"link":{}}' role="link" href="../get-started/05_challenge.html">Challenge</a></div></div><div class="menu__group" role="group" aria-labelledby="uniq1475014812187582"><div class="menu__group-title" role="presentation" id="uniq1475014812187582">Concepts</div><div class="menu-item menu-item_type_link menu-item_theme_islands i-bem" data-bem='{"menu-item":{"val":"concepts/01_the-architecture"}}' role="menuitemradio" id="uniq1475014812187583" aria-checked="false"><a class="link link__control i-bem" data-bem='{"link":{}}' role="link" href="../concepts/01_the-architecture.html">The architecture</a></div><div class="menu-item menu-item_type_link menu-item_theme_islands i-bem" data-bem='{"menu-item":{"val":"concepts/02_signals"}}' role="menuitemradio" id="uniq1475014812187584" aria-checked="false"><a class="link link__control i-bem" data-bem='{"link":{}}' role="link" href="../concepts/02_signals.html">Signals</a></div><div class="menu-item menu-item_type_link menu-item_theme_islands i-bem" data-bem='{"menu-item":{"val":"concepts/03_composition"}}' role="menuitemradio" id="uniq1475014812187585" aria-checked="false"><a class="link link__control i-bem" data-bem='{"link":{}}' role="link" href="../concepts/03_composition.html">Composition</a></div><div class="menu-item menu-item_type_link menu-item_theme_islands i-bem" data-bem='{"menu-item":{"val":"concepts/04_namespacing"}}' role="menuitemradio" id="uniq1475014812187586" aria-checked="false"><a class="link link__control i-bem" data-bem='{"link":{}}' role="link" href="../concepts/04_namespacing.html">Namespacing</a></div><div class="menu-item menu-item_type_link menu-item_theme_islands i-bem" data-bem='{"menu-item":{"val":"concepts/05_exposing-state"}}' role="menuitemradio" id="uniq1475014812187587" aria-checked="false"><a class="link link__control i-bem" data-bem='{"link":{}}' role="link" href="../concepts/05_exposing-state.html">Exposing state</a></div></div><div class="menu__group" role="group" aria-labelledby="uniq1475014812187588"><div class="menu__group-title" role="presentation" id="uniq1475014812187588">Getting real</div><div class="menu-item menu-item_type_link menu-item_theme_islands i-bem" data-bem='{"menu-item":{"val":"getting-real/01_organizing"}}' role="menuitemradio" id="uniq1475014812187589" aria-checked="false"><a class="link link__control i-bem" data-bem='{"link":{}}' role="link" href="../getting-real/01_organizing.html">Organizing</a></div><div class="menu-item menu-item_type_link menu-item_theme_islands i-bem" data-bem='{"menu-item":{"val":"getting-real/02_devtools"}}' role="menuitemradio" id="uniq1475014812187590" aria-checked="false"><a class="link link__control i-bem" data-bem='{"link":{}}' role="link" href="../getting-real/02_devtools.html">Devtools</a></div><div class="menu-item menu-item_type_link menu-item_checked menu-item_theme_islands i-bem" data-bem='{"menu-item":{"val":"getting-real/03_routing"}}' role="menuitemradio" id="uniq1475014812187591" aria-checked="true"><a class="link link__control i-bem" data-bem='{"link":{}}' role="link" href="../getting-real/03_routing.html">Routing</a></div><div class="menu-item menu-item_type_link menu-item_theme_islands i-bem" data-bem='{"menu-item":{"val":"getting-real/04_compute-state"}}' role="menuitemradio" id="uniq1475014812187592" aria-checked="false"><a class="link link__control i-bem" data-bem='{"link":{}}' role="link" href="../getting-real/04_compute-state.html">Compute state</a></div></div><div class="menu__group" role="group" aria-labelledby="uniq1475014812187593"><div class="menu__group-title" role="presentation" id="uniq1475014812187593">API</div><div class="menu-item menu-item_type_link menu-item_theme_islands i-bem" data-bem='{"menu-item":{"val":"api/01_controller"}}' role="menuitemradio" id="uniq1475014812187594" aria-checked="false"><a class="link link__control i-bem" data-bem='{"link":{}}' role="link" href="../api/01_controller.html">Controller</a></div><div class="menu-item menu-item_type_link menu-item_theme_islands i-bem" data-bem='{"menu-item":{"val":"api/02_state"}}' role="menuitemradio" id="uniq1475014812187595" aria-checked="false"><a class="link link__control i-bem" data-bem='{"link":{}}' role="link" href="../api/02_state.html">State</a></div><div class="menu-item menu-item_type_link menu-item_theme_islands i-bem" data-bem='{"menu-item":{"val":"api/03_signals"}}' role="menuitemradio" id="uniq1475014812187596" aria-checked="false"><a class="link link__control i-bem" data-bem='{"link":{}}' role="link" href="../api/03_signals.html">Signals</a></div><div class="menu-item menu-item_type_link menu-item_theme_islands i-bem" data-bem='{"menu-item":{"val":"api/04_modules"}}' role="menuitemradio" id="uniq1475014812187597" aria-checked="false"><a class="link link__control i-bem" data-bem='{"link":{}}' role="link" href="../api/04_modules.html">Modules</a></div><div class="menu-item menu-item_type_link menu-item_theme_islands i-bem" data-bem='{"menu-item":{"val":"api/05_operators"}}' role="menuitemradio" id="uniq1475014812187598" aria-checked="false"><a class="link link__control i-bem" data-bem='{"link":{}}' role="link" href="../api/05_operators.html">Operators</a></div><div class="menu-item menu-item_type_link menu-item_theme_islands i-bem" data-bem='{"menu-item":{"val":"api/06_providers"}}' role="menuitemradio" id="uniq1475014812187599" aria-checked="false"><a class="link link__control i-bem" data-bem='{"link":{}}' role="link" href="../api/06_providers.html">Providers</a></div><div class="menu-item menu-item_type_link menu-item_theme_islands i-bem" data-bem='{"menu-item":{"val":"api/07_router"}}' role="menuitemradio" id="uniq1475014812187600" aria-checked="false"><a class="link link__control i-bem" data-bem='{"link":{}}' role="link" href="../api/07_router.html">Router</a></div></div></div></div></div><div class="row__col row__col_sw_24 row__col_lw_18 row__col_lo_1"><div class="page__edit"><a class="link link_theme_islands link__control i-bem" data-bem='{"link":{}}' role="link" href="https://github.com/cerebral/cerebral-website/edit/v3/content/getting-real/03_routing.en.md">Edit on GitHub</a></div><h2 class="heading heading_lvl_2" id="routing">Routing</h2>
<p class="paragraph">Typically applications uses a router. Since Cerebral can be used in native applications the router is decoupled, meaning that you need to install it.</p>
<p class="paragraph"><code class="code">npm install cerebral-router</code></p>
<p class="paragraph">To instantiate the router you:</p>
<pre><code class="code" class="lang-js"><span class="token keyword" >import</span> <span class="token punctuation" >{</span>Controller<span class="token punctuation" >}</span> <span class="token keyword" >from</span> <span class="token string" >'cerebral'</span>
<span class="token keyword" >import</span> Router <span class="token keyword" >from</span> <span class="token string" >'cerebral-router'</span>

<span class="token keyword" >const</span> controller <span class="token operator" >=</span> <span class="token function" >Controller</span><span class="token punctuation" >(</span><span class="token punctuation" >{</span>
  router<span class="token punctuation" >:</span> <span class="token function" >Router</span><span class="token punctuation" >(</span><span class="token punctuation" >{</span>
    query<span class="token punctuation" >:</span> <span class="token boolean" >false</span><span class="token punctuation" >,</span> <span class="token comment" spellcheck="true">// Query support</span>
    onlyHash<span class="token punctuation" >:</span> <span class="token boolean" >false</span><span class="token punctuation" >,</span> <span class="token comment" spellcheck="true">// Use hash urls</span>
    baseUrl<span class="token punctuation" >:</span> <span class="token string" >'/'</span> <span class="token comment" spellcheck="true">// Only handle url changes on nested path</span>
  <span class="token punctuation" >}</span><span class="token punctuation" >)</span>
<span class="token punctuation" >}</span><span class="token punctuation" >)</span>
</code></pre>
<h3 class="heading heading_lvl_3" id="defining-routes">Defining routes</h3>
<p class="paragraph">When the router is activated on the controller all your modules, and the controller itself is able to define routes. These routes are not related to the view though. Routes in Cerebral trigger signals. The signals puts your application in a specific state and then your view decides what to render based on that state. So the router is completely decoupled from your view. This is a very good thing because a route can now translate to any kind of state changes and side effects.</p>
<p class="paragraph">Let us create a small app:</p>
<pre><code class="code" class="lang-js"><span class="token keyword" >import</span> <span class="token punctuation" >{</span>Controller<span class="token punctuation" >}</span> <span class="token keyword" >from</span> <span class="token string" >'cerebral'</span>
<span class="token keyword" >import</span> Router <span class="token keyword" >from</span> <span class="token string" >'cerebral-router'</span>
<span class="token keyword" >import</span> <span class="token punctuation" >{</span><span class="token keyword" >set</span><span class="token punctuation" >}</span> <span class="token keyword" >from</span> <span class="token string" >'cerebral/operators'</span>
<span class="token keyword" >import</span> HomeModule <span class="token keyword" >from</span> <span class="token string" >'./modules/Home'</span>
<span class="token keyword" >import</span> PostsModule <span class="token keyword" >from</span> <span class="token string" >'./modules/Posts'</span>

<span class="token keyword" >const</span> controller <span class="token operator" >=</span> <span class="token function" >Controller</span><span class="token punctuation" >(</span><span class="token punctuation" >{</span>
  router<span class="token punctuation" >:</span> <span class="token function" >Router</span><span class="token punctuation" >(</span><span class="token punctuation" >)</span><span class="token punctuation" >,</span>
  routes<span class="token punctuation" >:</span> <span class="token punctuation" >{</span>
    <span class="token string" >'/'</span><span class="token punctuation" >:</span> <span class="token string" >'home.routed'</span>
  <span class="token punctuation" >}</span><span class="token punctuation" >,</span>
  state<span class="token punctuation" >:</span> <span class="token punctuation" >{</span>
    currentPage<span class="token punctuation" >:</span> <span class="token string" >'home'</span>
  <span class="token punctuation" >}</span><span class="token punctuation" >,</span>
  modules<span class="token punctuation" >:</span> <span class="token punctuation" >{</span>
    home<span class="token punctuation" >:</span> HomeModule<span class="token punctuation" >,</span>
    posts<span class="token punctuation" >:</span> PostsModule
  <span class="token punctuation" >}</span>
<span class="token punctuation" >}</span><span class="token punctuation" >)</span>
</code></pre>
<p class="paragraph">As we can see, when the root route is hit we want to trigger a signal that says that home is routed:</p>
<p class="paragraph"><em>modules/Home/index.js</em></p>
<pre><code class="code" class="lang-js"><span class="token keyword" >import</span> <span class="token punctuation" >{</span><span class="token keyword" >set</span><span class="token punctuation" >}</span> <span class="token keyword" >from</span> <span class="token string" >'cerebral/operators'</span>

<span class="token keyword" >export</span> <span class="token keyword" >default</span> <span class="token punctuation" >{</span>
  signals<span class="token punctuation" >:</span> <span class="token punctuation" >{</span>
    routed<span class="token punctuation" >:</span> <span class="token punctuation" >[</span>
      <span class="token keyword" >set</span><span class="token punctuation" >(</span><span class="token string" >'state:currentPage'</span><span class="token punctuation" >,</span> <span class="token string" >'home'</span><span class="token punctuation" >)</span>
    <span class="token punctuation" >]</span>
  <span class="token punctuation" >}</span>
<span class="token punctuation" >}</span>
</code></pre>
<p class="paragraph">We could also define our <em>/posts</em> route at the top level, but we rather want to take advantage of the nested routing of modules. We define it on the module instead:</p>
<p class="paragraph"><em>modules/Posts/index.js</em></p>
<pre><code class="code" class="lang-js"><span class="token keyword" >import</span> <span class="token punctuation" >{</span><span class="token keyword" >set</span><span class="token punctuation" >}</span> <span class="token keyword" >from</span> <span class="token string" >'cerebral/operators'</span>

<span class="token keyword" >export</span> <span class="token keyword" >default</span> <span class="token punctuation" >{</span>
  routes<span class="token punctuation" >:</span> <span class="token punctuation" >{</span>
    <span class="token string" >'/'</span><span class="token punctuation" >:</span> <span class="token string" >'routed'</span>
  <span class="token punctuation" >}</span><span class="token punctuation" >,</span>
  signals<span class="token punctuation" >:</span> <span class="token punctuation" >{</span>
    routed<span class="token punctuation" >:</span> <span class="token punctuation" >[</span>
      <span class="token keyword" >set</span><span class="token punctuation" >(</span><span class="token string" >'state:currentPage'</span><span class="token punctuation" >,</span> <span class="token string" >'posts'</span><span class="token punctuation" >)</span>
    <span class="token punctuation" >]</span>
  <span class="token punctuation" >}</span>
<span class="token punctuation" >}</span>
</code></pre>
<p class="paragraph">Since the route is defined within the namespace <strong>posts</strong>, also the route will have that as a baseUrl (/posts).</p>
<h3 class="heading heading_lvl_3" id="render-based-on-state">Render based on state</h3>
<p class="paragraph">So we do not render anything based on the route. We render based on state, like we do with everything else. A route never affects the view layer, it only affects your state.</p>
<p class="paragraph"><em>components/App/index.js</em></p>
<pre><code class="code" class="lang-js"><span class="token keyword" >import</span> React <span class="token keyword" >from</span> <span class="token string" >'react'</span>
<span class="token keyword" >import</span> <span class="token punctuation" >{</span>connect<span class="token punctuation" >}</span> <span class="token keyword" >from</span> <span class="token string" >'cerebral/react'</span>
<span class="token keyword" >import</span> Home <span class="token keyword" >from</span> <span class="token string" >'../Home'</span>
<span class="token keyword" >import</span> Posts <span class="token keyword" >from</span> <span class="token string" >'../Posts'</span>

<span class="token keyword" >const</span> pages <span class="token operator" >=</span> <span class="token punctuation" >{</span>
  home<span class="token punctuation" >:</span> Home<span class="token punctuation" >,</span>
  posts<span class="token punctuation" >:</span> Posts
<span class="token punctuation" >}</span>

<span class="token keyword" >export</span> <span class="token keyword" >default</span> <span class="token function" >Connect</span><span class="token punctuation" >(</span><span class="token punctuation" >{</span>
  currentPage<span class="token punctuation" >:</span> <span class="token string" >'currentPage'</span>
<span class="token punctuation" >}</span><span class="token punctuation" >,</span>
  <span class="token keyword" >function</span> <span class="token function" >App</span><span class="token punctuation" >(</span>props<span class="token punctuation" >)</span> <span class="token punctuation" >{</span>
    <span class="token keyword" >const</span> Page <span class="token operator" >=</span> pages<span class="token punctuation" >[</span>props<span class="token punctuation" >.</span>currentPage<span class="token punctuation" >]</span>

    <span class="token keyword" >return</span> <span class="token operator" >&lt;</span>Page <span class="token operator" >/</span><span class="token operator" >></span>
  <span class="token punctuation" >}</span>
<span class="token punctuation" >)</span>
</code></pre>
<p class="paragraph">So this was simple page handling routing, but you can imagine that a route does not have to be a page change. It can open a modal, highlight some item or whatever. You are completely free to structure this. If some data fetching was needed before changing the page you would just put this in the signal.</p>
</div></div></div><footer class="footer page__footer"><div class="row"><div class="row__col row__col_sw_24 row__col_lw_6"><h4 class="footer__header">ORGANIZATION</h4><a class="link link__control footer__link i-bem" data-bem='{"link":{}}' role="link" href="../contributors">Contributors</a></div><div class="row__col row__col_sw_24 row__col_lw_6 row__col_lo_3"><h4 class="footer__header">ARTICLES AND USEFUL LINKS</h4></div><div class="row__col row__col_sw_24 row__col_lw_6 row__col_lo_6"><h4 class="footer__header">HELP</h4></div></div></footer><script src="../js/scripts.min.js"></script></body></html>