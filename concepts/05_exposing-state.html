<!DOCTYPE html><html class="ua_js_no"><head><meta charset="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><title>Cerebral</title><script>(function(e,c){e[c]=e[c].replace(/(ua_js_)no/g,"$1yes");})(document.documentElement,"className");</script><link rel="stylesheet" href="../css/styles.min.css"/><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:700,500,400"/><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto+Mono"/><link rel="shortcut icon" href="../favicon.ico"/><meta name="viewport" content="width=device-width,maximum-scale=1,initial-scale=1,user-scalable=no"/><meta name="format-detection" content="telephone=no"/><link name="apple-mobile-web-app-capable" content="yes"/></head><body class="page page_layout_concepts"><div class="page__header"><div class="head-nav"><a class="link link__control head-nav__home i-bem" data-bem='{"link":{}}' role="link" href="../"></a></div></div><div class="page__content"><div class="row"><div class="row__col row__col_sw_24 row__col_lw_5 row__col_sol row__col_mol"><div class="side-nav"><div class="menu menu_theme_islands menu_size_xl menu_mode_radio menu__control i-bem" data-bem='{"menu":{}}' role="menu" tabindex="0"><div class="menu__group" role="group" aria-labelledby="uniq1475427948072337"><div class="menu__group-title" role="presentation" id="uniq1475427948072337">Get started</div><div class="menu-item menu-item_type_link menu-item_theme_islands i-bem" data-bem='{"menu-item":{"val":"get-started/01_get-started"}}' role="menuitemradio" id="uniq1475427948072338" aria-checked="false"><a class="link link__control i-bem" data-bem='{"link":{}}' role="link" href="../get-started/01_get-started.html">Get started</a></div><div class="menu-item menu-item_type_link menu-item_theme_islands i-bem" data-bem='{"menu-item":{"val":"get-started/02_store-state"}}' role="menuitemradio" id="uniq1475427948072339" aria-checked="false"><a class="link link__control i-bem" data-bem='{"link":{}}' role="link" href="../get-started/02_store-state.html">Store state</a></div><div class="menu-item menu-item_type_link menu-item_theme_islands i-bem" data-bem='{"menu-item":{"val":"get-started/03_render-state"}}' role="menuitemradio" id="uniq1475427948072340" aria-checked="false"><a class="link link__control i-bem" data-bem='{"link":{}}' role="link" href="../get-started/03_render-state.html">Render state</a></div><div class="menu-item menu-item_type_link menu-item_theme_islands i-bem" data-bem='{"menu-item":{"val":"get-started/04_update-state"}}' role="menuitemradio" id="uniq1475427948072341" aria-checked="false"><a class="link link__control i-bem" data-bem='{"link":{}}' role="link" href="../get-started/04_update-state.html">Update state</a></div><div class="menu-item menu-item_type_link menu-item_theme_islands i-bem" data-bem='{"menu-item":{"val":"get-started/05_challenge"}}' role="menuitemradio" id="uniq1475427948072342" aria-checked="false"><a class="link link__control i-bem" data-bem='{"link":{}}' role="link" href="../get-started/05_challenge.html">Challenge</a></div></div><div class="menu__group" role="group" aria-labelledby="uniq1475427948072343"><div class="menu__group-title" role="presentation" id="uniq1475427948072343">Concepts</div><div class="menu-item menu-item_type_link menu-item_theme_islands i-bem" data-bem='{"menu-item":{"val":"concepts/01_the-architecture"}}' role="menuitemradio" id="uniq1475427948072344" aria-checked="false"><a class="link link__control i-bem" data-bem='{"link":{}}' role="link" href="../concepts/01_the-architecture.html">The architecture</a></div><div class="menu-item menu-item_type_link menu-item_theme_islands i-bem" data-bem='{"menu-item":{"val":"concepts/02_signals"}}' role="menuitemradio" id="uniq1475427948072345" aria-checked="false"><a class="link link__control i-bem" data-bem='{"link":{}}' role="link" href="../concepts/02_signals.html">Signals</a></div><div class="menu-item menu-item_type_link menu-item_theme_islands i-bem" data-bem='{"menu-item":{"val":"concepts/03_composition"}}' role="menuitemradio" id="uniq1475427948072346" aria-checked="false"><a class="link link__control i-bem" data-bem='{"link":{}}' role="link" href="../concepts/03_composition.html">Composition</a></div><div class="menu-item menu-item_type_link menu-item_theme_islands i-bem" data-bem='{"menu-item":{"val":"concepts/04_namespacing"}}' role="menuitemradio" id="uniq1475427948072347" aria-checked="false"><a class="link link__control i-bem" data-bem='{"link":{}}' role="link" href="../concepts/04_namespacing.html">Namespacing</a></div><div class="menu-item menu-item_type_link menu-item_checked menu-item_theme_islands i-bem" data-bem='{"menu-item":{"val":"concepts/05_exposing-state"}}' role="menuitemradio" id="uniq1475427948072348" aria-checked="true"><a class="link link__control i-bem" data-bem='{"link":{}}' role="link" href="../concepts/05_exposing-state.html">Exposing state</a></div></div><div class="menu__group" role="group" aria-labelledby="uniq1475427948072349"><div class="menu__group-title" role="presentation" id="uniq1475427948072349">Getting real</div><div class="menu-item menu-item_type_link menu-item_theme_islands i-bem" data-bem='{"menu-item":{"val":"getting-real/01_organizing"}}' role="menuitemradio" id="uniq1475427948072350" aria-checked="false"><a class="link link__control i-bem" data-bem='{"link":{}}' role="link" href="../getting-real/01_organizing.html">Organizing</a></div><div class="menu-item menu-item_type_link menu-item_theme_islands i-bem" data-bem='{"menu-item":{"val":"getting-real/02_devtools"}}' role="menuitemradio" id="uniq1475427948072351" aria-checked="false"><a class="link link__control i-bem" data-bem='{"link":{}}' role="link" href="../getting-real/02_devtools.html">Devtools</a></div><div class="menu-item menu-item_type_link menu-item_theme_islands i-bem" data-bem='{"menu-item":{"val":"getting-real/03_routing"}}' role="menuitemradio" id="uniq1475427948072352" aria-checked="false"><a class="link link__control i-bem" data-bem='{"link":{}}' role="link" href="../getting-real/03_routing.html">Routing</a></div><div class="menu-item menu-item_type_link menu-item_theme_islands i-bem" data-bem='{"menu-item":{"val":"getting-real/04_compute-state"}}' role="menuitemradio" id="uniq1475427948072353" aria-checked="false"><a class="link link__control i-bem" data-bem='{"link":{}}' role="link" href="../getting-real/04_compute-state.html">Compute state</a></div><div class="menu-item menu-item_type_link menu-item_theme_islands i-bem" data-bem='{"menu-item":{"val":"getting-real/05_connecting-to-components"}}' role="menuitemradio" id="uniq1475427948072354" aria-checked="false"><a class="link link__control i-bem" data-bem='{"link":{}}' role="link" href="../getting-real/05_connecting-to-components.html">Connecting to components</a></div><div class="menu-item menu-item_type_link menu-item_theme_islands i-bem" data-bem='{"menu-item":{"val":"getting-real/06_adding-providers"}}' role="menuitemradio" id="uniq1475427948072355" aria-checked="false"><a class="link link__control i-bem" data-bem='{"link":{}}' role="link" href="../getting-real/06_adding-providers.html">Adding providers</a></div><div class="menu-item menu-item_type_link menu-item_theme_islands i-bem" data-bem='{"menu-item":{"val":"getting-real/07_constants"}}' role="menuitemradio" id="uniq1475427948072356" aria-checked="false"><a class="link link__control i-bem" data-bem='{"link":{}}' role="link" href="../getting-real/07_constants.html">Constants</a></div></div><div class="menu__group" role="group" aria-labelledby="uniq1475427948072357"><div class="menu__group-title" role="presentation" id="uniq1475427948072357">API</div><div class="menu-item menu-item_type_link menu-item_theme_islands i-bem" data-bem='{"menu-item":{"val":"api/01_controller"}}' role="menuitemradio" id="uniq1475427948072358" aria-checked="false"><a class="link link__control i-bem" data-bem='{"link":{}}' role="link" href="../api/01_controller.html">Controller</a></div><div class="menu-item menu-item_type_link menu-item_theme_islands i-bem" data-bem='{"menu-item":{"val":"api/02_state"}}' role="menuitemradio" id="uniq1475427948072359" aria-checked="false"><a class="link link__control i-bem" data-bem='{"link":{}}' role="link" href="../api/02_state.html">State</a></div><div class="menu-item menu-item_type_link menu-item_theme_islands i-bem" data-bem='{"menu-item":{"val":"api/03_signals"}}' role="menuitemradio" id="uniq1475427948072360" aria-checked="false"><a class="link link__control i-bem" data-bem='{"link":{}}' role="link" href="../api/03_signals.html">Signals</a></div><div class="menu-item menu-item_type_link menu-item_theme_islands i-bem" data-bem='{"menu-item":{"val":"api/04_modules"}}' role="menuitemradio" id="uniq1475427948072361" aria-checked="false"><a class="link link__control i-bem" data-bem='{"link":{}}' role="link" href="../api/04_modules.html">Modules</a></div><div class="menu-item menu-item_type_link menu-item_theme_islands i-bem" data-bem='{"menu-item":{"val":"api/05_operators"}}' role="menuitemradio" id="uniq1475427948072362" aria-checked="false"><a class="link link__control i-bem" data-bem='{"link":{}}' role="link" href="../api/05_operators.html">Operators</a></div><div class="menu-item menu-item_type_link menu-item_theme_islands i-bem" data-bem='{"menu-item":{"val":"api/06_providers"}}' role="menuitemradio" id="uniq1475427948072363" aria-checked="false"><a class="link link__control i-bem" data-bem='{"link":{}}' role="link" href="../api/06_providers.html">Providers</a></div><div class="menu-item menu-item_type_link menu-item_theme_islands i-bem" data-bem='{"menu-item":{"val":"api/07_router"}}' role="menuitemradio" id="uniq1475427948072364" aria-checked="false"><a class="link link__control i-bem" data-bem='{"link":{}}' role="link" href="../api/07_router.html">Router</a></div></div></div></div></div><div class="row__col row__col_sw_24 row__col_lw_18 row__col_lo_1"><div class="page__edit"><a class="link link_theme_islands link__control i-bem" data-bem='{"link":{}}' role="link" href="https://github.com/cerebral/cerebral-website/edit/v3/content/concepts/05_exposing-state.en.md">Edit on GitHub</a></div><h2 class="heading heading_lvl_2" id="exposing-state">Exposing state</h2>
<p class="paragraph">In Cerebral you always connect state where you need it. This give some benefits:</p>
<ol class="list list_type_ordered">
<li class="list__item">Cerebral will optimize the component</li>
<li class="list__item">The debugger will know about this component and understand its state dependencies</li>
<li class="list__item">Increased readability as every component explicitly tells you what state it needs and where it gets it from</li>
<li class="list__item">You can safely move the component wherever you want without breaking some chain of props passing</li>
</ol>
<p class="paragraph">Generally you do not have to give this much thought, but there are conventions that will help you handle certain scenarios.</p>
<h3 class="heading heading_lvl_3" id="lists">Lists</h3>
<p class="paragraph">Typically when working with lists you would:</p>
<pre><code class="code" class="lang-js"><span class="token keyword" >import</span> React <span class="token keyword" >from</span> <span class="token string" >'react'</span>
<span class="token keyword" >import</span> <span class="token punctuation" >{</span>connect<span class="token punctuation" >}</span> <span class="token keyword" >from</span> <span class="token string" >'cerebral/react'</span>

<span class="token keyword" >export</span> <span class="token keyword" >default</span> <span class="token function" >connect</span><span class="token punctuation" >(</span><span class="token punctuation" >{</span>
  items<span class="token punctuation" >:</span> <span class="token string" >'items.data'</span>
<span class="token punctuation" >}</span><span class="token punctuation" >,</span>
  <span class="token keyword" >function</span> <span class="token function" >Items</span><span class="token punctuation" >(</span>props<span class="token punctuation" >)</span> <span class="token punctuation" >{</span>
    <span class="token keyword" >return</span> <span class="token punctuation" >(</span>
      <span class="token operator" >&lt;</span>ul<span class="token operator" >></span>
        <span class="token punctuation" >{</span>props<span class="token punctuation" >.</span>items<span class="token punctuation" >.</span><span class="token function" >map</span><span class="token punctuation" >(</span><span class="token punctuation" >(</span>item<span class="token punctuation" >,</span> index<span class="token punctuation" >)</span> <span class="token operator" >=</span><span class="token operator" >></span> <span class="token punctuation" >{</span>
          <span class="token operator" >&lt;</span>Item key<span class="token operator" >=</span><span class="token punctuation" >{</span>index<span class="token punctuation" >}</span> item<span class="token operator" >=</span><span class="token punctuation" >{</span>item<span class="token punctuation" >}</span> <span class="token operator" >/</span><span class="token operator" >></span>
        <span class="token punctuation" >}</span><span class="token punctuation" >)</span><span class="token punctuation" >}</span>
      <span class="token operator" >&lt;</span><span class="token operator" >/</span>ul<span class="token operator" >></span>
    <span class="token punctuation" >)</span>
  <span class="token punctuation" >}</span>
<span class="token punctuation" >)</span>
</code></pre>
<p class="paragraph">This is perfectly okay if you do not care about updates to each item in the list. But when working with Cerebral and the items in your lists are actual entities (objects with ids) and individual items can update, you should favor storing them as a map instead. That means:</p>
<pre><code class="code" class="lang-js"><span class="token punctuation" >{</span>
  items<span class="token punctuation" >:</span> <span class="token punctuation" >{</span>
    id1<span class="token punctuation" >:</span> <span class="token punctuation" >{</span><span class="token punctuation" >}</span><span class="token punctuation" >,</span>
    id2<span class="token punctuation" >:</span> <span class="token punctuation" >{</span><span class="token punctuation" >}</span><span class="token punctuation" >,</span>
    id3<span class="token punctuation" >:</span> <span class="token punctuation" >{</span><span class="token punctuation" >}</span>
  <span class="token punctuation" >}</span>
<span class="token punctuation" >}</span>
</code></pre>
<p class="paragraph">This gives you three benefits:</p>
<ol class="list list_type_ordered">
<li class="list__item"><p class="paragraph">If you give each item a client side id, for example using <a class="link link__control i-bem" data-bem='{"link":{}}' role="link" tabindex="0" href="https://www.npmjs.com/package/uuid">uuid</a>, you can very easily optimistically add new items without worrying about their place. They will get a client side id and can always be referenced by that</p>
</li>
<li class="list__item"><p class="paragraph">It will be faster and less code to look up entities when you have an id to reference them with. You just point to <strong>items.id2</strong> and you have the item. No array search</p>
</li>
<li class="list__item"><p class="paragraph">Your components can connect directly to an entity</p>
</li>
</ol>
<pre><code class="code" class="lang-js"><span class="token keyword" >import</span> React <span class="token keyword" >from</span> <span class="token string" >'react'</span>
<span class="token keyword" >import</span> <span class="token punctuation" >{</span>connect<span class="token punctuation" >}</span> <span class="token keyword" >from</span> <span class="token string" >'cerebral/react'</span>

<span class="token keyword" >export</span> <span class="token keyword" >default</span> <span class="token function" >connect</span><span class="token punctuation" >(</span><span class="token punctuation" >{</span>
  items<span class="token punctuation" >:</span> <span class="token string" >'items.data'</span>
<span class="token punctuation" >}</span><span class="token punctuation" >,</span>
  <span class="token keyword" >function</span> <span class="token function" >List</span><span class="token punctuation" >(</span>props<span class="token punctuation" >)</span> <span class="token punctuation" >{</span>
    <span class="token keyword" >return</span> <span class="token punctuation" >(</span>
      <span class="token operator" >&lt;</span>ul<span class="token operator" >></span>
        <span class="token punctuation" >{</span>Object<span class="token punctuation" >.</span><span class="token function" >keys</span><span class="token punctuation" >(</span>props<span class="token punctuation" >.</span>items<span class="token punctuation" >)</span><span class="token punctuation" >.</span><span class="token function" >map</span><span class="token punctuation" >(</span><span class="token punctuation" >(</span>itemKey<span class="token punctuation" >)</span> <span class="token operator" >=</span><span class="token operator" >></span> <span class="token punctuation" >{</span>
          <span class="token operator" >&lt;</span>Item key<span class="token operator" >=</span><span class="token punctuation" >{</span>itemKey<span class="token punctuation" >}</span> itemKey<span class="token operator" >=</span><span class="token punctuation" >{</span>itemKey<span class="token punctuation" >}</span> <span class="token operator" >/</span><span class="token operator" >></span>
        <span class="token punctuation" >}</span><span class="token punctuation" >)</span><span class="token punctuation" >}</span>
      <span class="token operator" >&lt;</span><span class="token operator" >/</span>ul<span class="token operator" >></span>
    <span class="token punctuation" >)</span>
  <span class="token punctuation" >}</span>
<span class="token punctuation" >)</span>
</code></pre>
<p class="paragraph">We are now giving the component only a reference to the item it should connect to. That means inside our <strong>Item</strong> component:</p>
<pre><code class="code" class="lang-js"><span class="token keyword" >import</span> React <span class="token keyword" >from</span> <span class="token string" >'react'</span>
<span class="token keyword" >import</span> <span class="token punctuation" >{</span>connect<span class="token punctuation" >}</span> <span class="token keyword" >from</span> <span class="token string" >'cerebral/react'</span>

<span class="token keyword" >export</span> <span class="token keyword" >default</span> <span class="token function" >connect</span><span class="token punctuation" >(</span><span class="token punctuation" >(</span>props<span class="token punctuation" >)</span> <span class="token operator" >=</span><span class="token operator" >></span> <span class="token punctuation" >(</span><span class="token punctuation" >{</span>
  item<span class="token punctuation" >:</span> <span class="token template-string" ><span class="token string" >`items.data.</span><span class="token interpolation" ><span class="token interpolation-punctuation punctuation" >${</span>props<span class="token punctuation" >.</span>itemKey<span class="token interpolation-punctuation punctuation" >}</span></span><span class="token string" >`</span></span>
<span class="token punctuation" >}</span><span class="token punctuation" >)</span><span class="token punctuation" >,</span>
  <span class="token keyword" >function</span> <span class="token function" >Item</span><span class="token punctuation" >(</span>props<span class="token punctuation" >)</span> <span class="token punctuation" >{</span>
    <span class="token keyword" >return</span> <span class="token punctuation" >(</span>
      <span class="token operator" >&lt;</span>div<span class="token operator" >></span>
        <span class="token punctuation" >{</span>props<span class="token punctuation" >.</span>item<span class="token punctuation" >.</span>title<span class="token punctuation" >}</span>
      <span class="token operator" >&lt;</span><span class="token operator" >/</span>div<span class="token operator" >></span>
    <span class="token punctuation" >)</span>
  <span class="token punctuation" >}</span>
<span class="token punctuation" >)</span>
</code></pre>
<p class="paragraph">This component is now optimized, it is more explicit about where it gets its state from and you also got the other benefits mentioned above.</p>
<p class="paragraph">If you worry about order entities are most certainly added with a datetime, so you can typically sort on that.</p>
</div></div></div><footer class="footer page__footer"><div class="row"><div class="row__col row__col_sw_24 row__col_lw_6"><h4 class="footer__header">ORGANIZATION</h4><a class="link link__control footer__link i-bem" data-bem='{"link":{}}' role="link" href="../contributors">Contributors</a><a class="link link__control footer__link i-bem" data-bem='{"link":{}}' role="link" href="http://www.webpackbin.com">www.webpackbin.com</a><a class="link link__control footer__link i-bem" data-bem='{"link":{}}' role="link" href="http://www.christianalfoni.com">www.christianalfoni.com</a></div><div class="row__col row__col_sw_24 row__col_lw_6 row__col_lo_3"><h4 class="footer__header">ARTICLES AND USEFUL LINKS</h4><a class="link link__control footer__link i-bem" data-bem='{"link":{}}' role="link" href="http://medium.com/p/5793c08db2cc">The story of Cerebral</a><a class="link link__control footer__link i-bem" data-bem='{"link":{}}' role="link" href="https://gist.github.com/christianalfoni/b08a99faa09df054afe87528a2134730">An unlikely success story</a></div><div class="row__col row__col_sw_24 row__col_lw_6 row__col_lo_6"><h4 class="footer__header">HELP</h4><a class="link link__control footer__link i-bem" data-bem='{"link":{}}' role="link" href="https://github.com/cerebral/cerebral">Cerebral github repo</a><a class="link link__control footer__link i-bem" data-bem='{"link":{}}' role="link" href="https://discord.gg/0kIweV4bd2bwwsvH">Discord chat</a></div></div></footer><script src="../js/scripts.min.js"></script></body></html>