<!DOCTYPE html><html class="ua_js_no"><head><meta charset="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><title>Cerebral</title><script>(function(e,c){e[c]=e[c].replace(/(ua_js_)no/g,"$1yes");})(document.documentElement,"className");</script><link rel="stylesheet" href="../css/styles.min.css"/><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:700,500,400"/><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto+Mono"/><link rel="shortcut icon" href="../favicon.ico"/><meta name="viewport" content="width=device-width,maximum-scale=1,initial-scale=1,user-scalable=no"/><meta name="format-detection" content="telephone=no"/><link name="apple-mobile-web-app-capable" content="yes"/></head><body class="page page_layout_concepts"><div class="page__header"><div class="head-nav"><a class="link link__control head-nav__home i-bem" data-bem='{"link":{}}' role="link" href="../"></a></div></div><div class="page__content"><div class="wip">This documentation is about upcoming cerebral v2 which is currently is work in progress.<br/>Documentation might not always describe actual state of API.<br/>API itself could have some notable changes, though it shouldn't be critical.<br/>Feel free to contribute to docs by clicking Edit on Github link.</div><div class="row"><div class="row__col row__col_sw_24 row__col_lw_5 row__col_sol row__col_mol"><div class="side-nav"><div class="menu menu_theme_islands menu_size_xl menu_mode_radio-check menu__control i-bem" data-bem='{"menu":{}}' role="menu" tabindex="0"><div class="menu__group" role="group" aria-labelledby="uniq1477318396195307"><div class="menu__group-title" role="presentation" id="uniq1477318396195307">Get started</div><div class="menu-item menu-item_type_link menu-item_theme_islands i-bem" data-bem='{"menu-item":{"val":"get-started/01_get-started"}}' role="menuitemradio" id="uniq1477318396195308" aria-checked="false"><a class="link link__control i-bem" data-bem='{"link":{}}' role="link" href="../get-started/01_get-started.html">Get started</a></div><div class="menu-item menu-item_type_link menu-item_theme_islands i-bem" data-bem='{"menu-item":{"val":"get-started/02_store-state"}}' role="menuitemradio" id="uniq1477318396195309" aria-checked="false"><a class="link link__control i-bem" data-bem='{"link":{}}' role="link" href="../get-started/02_store-state.html">Store state</a></div><div class="menu-item menu-item_type_link menu-item_theme_islands i-bem" data-bem='{"menu-item":{"val":"get-started/03_render-state"}}' role="menuitemradio" id="uniq1477318396195310" aria-checked="false"><a class="link link__control i-bem" data-bem='{"link":{}}' role="link" href="../get-started/03_render-state.html">Render state</a></div><div class="menu-item menu-item_type_link menu-item_theme_islands i-bem" data-bem='{"menu-item":{"val":"get-started/04_update-state"}}' role="menuitemradio" id="uniq1477318396195311" aria-checked="false"><a class="link link__control i-bem" data-bem='{"link":{}}' role="link" href="../get-started/04_update-state.html">Update state</a></div><div class="menu-item menu-item_type_link menu-item_theme_islands i-bem" data-bem='{"menu-item":{"val":"get-started/05_challenge"}}' role="menuitemradio" id="uniq1477318396195312" aria-checked="false"><a class="link link__control i-bem" data-bem='{"link":{}}' role="link" href="../get-started/05_challenge.html">Challenge</a></div></div><div class="menu__group" role="group" aria-labelledby="uniq1477318396195313"><div class="menu__group-title" role="presentation" id="uniq1477318396195313">Concepts</div><div class="menu-item menu-item_type_link menu-item_checked menu-item_theme_islands i-bem" data-bem='{"menu-item":{"val":"concepts/01_the-architecture"}}' role="menuitemradio" id="uniq1477318396195314" aria-checked="true"><a class="link link__control i-bem" data-bem='{"link":{}}' role="link" href="../concepts/01_the-architecture.html">The architecture</a></div><div class="menu-item menu-item_type_link menu-item_theme_islands i-bem" data-bem='{"menu-item":{"val":"concepts/02_signals"}}' role="menuitemradio" id="uniq1477318396195315" aria-checked="false"><a class="link link__control i-bem" data-bem='{"link":{}}' role="link" href="../concepts/02_signals.html">Signals</a></div><div class="menu-item menu-item_type_link menu-item_theme_islands i-bem" data-bem='{"menu-item":{"val":"concepts/03_composition"}}' role="menuitemradio" id="uniq1477318396195316" aria-checked="false"><a class="link link__control i-bem" data-bem='{"link":{}}' role="link" href="../concepts/03_composition.html">Composition</a></div><div class="menu-item menu-item_type_link menu-item_theme_islands i-bem" data-bem='{"menu-item":{"val":"concepts/04_namespacing"}}' role="menuitemradio" id="uniq1477318396195317" aria-checked="false"><a class="link link__control i-bem" data-bem='{"link":{}}' role="link" href="../concepts/04_namespacing.html">Namespacing</a></div><div class="menu-item menu-item_type_link menu-item_theme_islands i-bem" data-bem='{"menu-item":{"val":"concepts/05_exposing-state"}}' role="menuitemradio" id="uniq1477318396195318" aria-checked="false"><a class="link link__control i-bem" data-bem='{"link":{}}' role="link" href="../concepts/05_exposing-state.html">Exposing state</a></div></div><div class="menu__group" role="group" aria-labelledby="uniq1477318396195319"><div class="menu__group-title" role="presentation" id="uniq1477318396195319">Getting real</div><div class="menu-item menu-item_type_link menu-item_theme_islands i-bem" data-bem='{"menu-item":{"val":"getting-real/01_community-tools"}}' role="menuitemradio" id="uniq1477318396195320" aria-checked="false"><a class="link link__control i-bem" data-bem='{"link":{}}' role="link" href="../getting-real/01_community-tools.html">Community tools</a></div><div class="menu-item menu-item_type_link menu-item_theme_islands i-bem" data-bem='{"menu-item":{"val":"getting-real/02_organizing"}}' role="menuitemradio" id="uniq1477318396195321" aria-checked="false"><a class="link link__control i-bem" data-bem='{"link":{}}' role="link" href="../getting-real/02_organizing.html">Organizing</a></div><div class="menu-item menu-item_type_link menu-item_theme_islands i-bem" data-bem='{"menu-item":{"val":"getting-real/03_adding-providers"}}' role="menuitemradio" id="uniq1477318396195322" aria-checked="false"><a class="link link__control i-bem" data-bem='{"link":{}}' role="link" href="../getting-real/03_adding-providers.html">Adding providers</a></div><div class="menu-item menu-item_type_link menu-item_theme_islands i-bem" data-bem='{"menu-item":{"val":"getting-real/03_devtools"}}' role="menuitemradio" id="uniq1477318396195323" aria-checked="false"><a class="link link__control i-bem" data-bem='{"link":{}}' role="link" href="../getting-real/03_devtools.html">Devtools</a></div><div class="menu-item menu-item_type_link menu-item_theme_islands i-bem" data-bem='{"menu-item":{"val":"getting-real/05_compute-state"}}' role="menuitemradio" id="uniq1477318396195324" aria-checked="false"><a class="link link__control i-bem" data-bem='{"link":{}}' role="link" href="../getting-real/05_compute-state.html">Compute state</a></div><div class="menu-item menu-item_type_link menu-item_theme_islands i-bem" data-bem='{"menu-item":{"val":"getting-real/06_connecting-to-components"}}' role="menuitemradio" id="uniq1477318396195325" aria-checked="false"><a class="link link__control i-bem" data-bem='{"link":{}}' role="link" href="../getting-real/06_connecting-to-components.html">Connecting to components</a></div><div class="menu-item menu-item_type_link menu-item_theme_islands i-bem" data-bem='{"menu-item":{"val":"getting-real/07_routing"}}' role="menuitemradio" id="uniq1477318396195326" aria-checked="false"><a class="link link__control i-bem" data-bem='{"link":{}}' role="link" href="../getting-real/07_routing.html">Routing</a></div><div class="menu-item menu-item_type_link menu-item_theme_islands i-bem" data-bem='{"menu-item":{"val":"getting-real/08_constants"}}' role="menuitemradio" id="uniq1477318396195327" aria-checked="false"><a class="link link__control i-bem" data-bem='{"link":{}}' role="link" href="../getting-real/08_constants.html">Constants</a></div><div class="menu-item menu-item_type_link menu-item_theme_islands i-bem" data-bem='{"menu-item":{"val":"getting-real/09_server-side"}}' role="menuitemradio" id="uniq1477318396195328" aria-checked="false"><a class="link link__control i-bem" data-bem='{"link":{}}' role="link" href="../getting-real/09_server-side.html">Server side</a></div><div class="menu-item menu-item_type_link menu-item_theme_islands i-bem" data-bem='{"menu-item":{"val":"getting-real/10_testing"}}' role="menuitemradio" id="uniq1477318396195329" aria-checked="false"><a class="link link__control i-bem" data-bem='{"link":{}}' role="link" href="../getting-real/10_testing.html">Testing</a></div></div><div class="menu__group" role="group" aria-labelledby="uniq1477318396195330"><div class="menu__group-title" role="presentation" id="uniq1477318396195330">Migration</div><div class="menu-item menu-item_type_link menu-item_theme_islands i-bem" data-bem='{"menu-item":{"val":"migration/01_start_migration"}}' role="menuitemradio" id="uniq1477318396195331" aria-checked="false"><a class="link link__control i-bem" data-bem='{"link":{}}' role="link" href="../migration/01_start_migration.html">From 1.x to 2.x</a></div></div><div class="menu__group" role="group" aria-labelledby="uniq1477318396195332"><div class="menu__group-title" role="presentation" id="uniq1477318396195332">API</div><div class="menu-item menu-item_type_link menu-item_theme_islands i-bem" data-bem='{"menu-item":{"val":"api/01_controller"}}' role="menuitemradio" id="uniq1477318396195333" aria-checked="false"><a class="link link__control i-bem" data-bem='{"link":{}}' role="link" href="../api/01_controller.html">Controller</a></div><div class="menu-item menu-item_type_link menu-item_theme_islands i-bem" data-bem='{"menu-item":{"val":"api/02_state"}}' role="menuitemradio" id="uniq1477318396195334" aria-checked="false"><a class="link link__control i-bem" data-bem='{"link":{}}' role="link" href="../api/02_state.html">State</a></div><div class="menu-item menu-item_type_link menu-item_theme_islands i-bem" data-bem='{"menu-item":{"val":"api/03_signals"}}' role="menuitemradio" id="uniq1477318396195335" aria-checked="false"><a class="link link__control i-bem" data-bem='{"link":{}}' role="link" href="../api/03_signals.html">Signals</a></div><div class="menu-item menu-item_type_link menu-item_theme_islands i-bem" data-bem='{"menu-item":{"val":"api/04_modules"}}' role="menuitemradio" id="uniq1477318396195336" aria-checked="false"><a class="link link__control i-bem" data-bem='{"link":{}}' role="link" href="../api/04_modules.html">Modules</a></div><div class="menu-item menu-item_type_link menu-item_theme_islands i-bem" data-bem='{"menu-item":{"val":"api/05_operators"}}' role="menuitemradio" id="uniq1477318396195337" aria-checked="false"><a class="link link__control i-bem" data-bem='{"link":{}}' role="link" href="../api/05_operators.html">Operators</a></div><div class="menu-item menu-item_type_link menu-item_theme_islands i-bem" data-bem='{"menu-item":{"val":"api/06_providers"}}' role="menuitemradio" id="uniq1477318396195338" aria-checked="false"><a class="link link__control i-bem" data-bem='{"link":{}}' role="link" href="../api/06_providers.html">Providers</a></div><div class="menu-item menu-item_type_link menu-item_theme_islands i-bem" data-bem='{"menu-item":{"val":"api/07_connect"}}' role="menuitemradio" id="uniq1477318396195339" aria-checked="false"><a class="link link__control i-bem" data-bem='{"link":{}}' role="link" href="../api/07_connect.html">Connect</a></div><div class="menu-item menu-item_type_link menu-item_theme_islands i-bem" data-bem='{"menu-item":{"val":"api/08_router"}}' role="menuitemradio" id="uniq1477318396195340" aria-checked="false"><a class="link link__control i-bem" data-bem='{"link":{}}' role="link" href="../api/08_router.html">Router</a></div></div></div></div></div><div class="row__col row__col_sw_24 row__col_lw_18 row__col_lo_1"><div class="page__edit"><a class="link link_theme_islands link__control i-bem" data-bem='{"link":{}}' role="link" href="https://github.com/cerebral/cerebral-website/blob/v3/content/concepts/01_the-architecture.en.md">Edit on GitHub</a></div><h2 class="heading heading_lvl_2" id="the-architecture">The architecture</h2>
<p class="paragraph">Cerebral is based on the simple concept that there are three things your application needs to do in order to function:</p>
<ol class="list list_type_ordered">
<li class="list__item"><p class="paragraph">Store state</p>
</li>
<li class="list__item"><p class="paragraph">Render state</p>
</li>
<li class="list__item"><p class="paragraph">Update state</p>
</li>
</ol>
<h3 class="heading heading_lvl_3" id="store-state">Store state</h3>
<p class="paragraph">Where to store the state of an application is a highly debated subject. Should we allow the views to store state? Should we have multiple models? Stores? Reducers? Services? There are many concepts to handle this. In Cerebral we encourage you to store all the state of the application in a single state tree.</p>
<p class="paragraph">With this approach we get some benefits not possible with other approaches.</p>
<h4 class="heading heading_lvl_4" id="a-simple-and-consistent-api-for-updating-state">A simple and consistent API for updating state</h4>
<p class="paragraph">Typically a state update changes a value, pushes an item in a list or merges an object into another. With a single state tree we can create an API that does exactly that:</p>
<pre><code class="code" class="lang-js">state<span class="token punctuation" >.</span><span class="token keyword" >set</span><span class="token punctuation" >(</span><span class="token string" >'user.prefs.style'</span><span class="token punctuation" >,</span> <span class="token string" >'dark'</span><span class="token punctuation" >)</span>
state<span class="token punctuation" >.</span><span class="token function" >push</span><span class="token punctuation" >(</span><span class="token string" >'user.friends'</span><span class="token punctuation" >,</span> <span class="token string" >'Joe'</span><span class="token punctuation" >)</span>
state<span class="token punctuation" >.</span><span class="token function" >merge</span><span class="token punctuation" >(</span><span class="token string" >'user.info'</span><span class="token punctuation" >,</span> <span class="token punctuation" >{</span>
  email<span class="token punctuation" >:</span> <span class="token string" >'cheetah@jungle.com'</span><span class="token punctuation" >,</span>
  name<span class="token punctuation" >:</span> <span class="token string" >'Cheetah'</span>
<span class="token punctuation" >}</span><span class="token punctuation" >)</span>
</code></pre>
<p class="paragraph">With a single state tree we can point to parts of the state using paths (the first argument). We use dot notation to point to nested paths, like <strong>admin.user.name</strong>.</p>
<h4 class="heading heading_lvl_4" id="optimized-rendering">Optimized rendering</h4>
<p class="paragraph">Cerebral does not look at the updates in your application as &quot;value updates&quot;, but as &quot;path updates&quot;. This allows Cerebral to make optimizations not possible in other frameworks:</p>
<ol class="list list_type_ordered">
<li class="list__item"><p class="paragraph">There is no need for immutability in Cerebral because a change to a path means that any component depending on that path should rerender (no value comparison). In applications with large data structures immutability has a high cost.</p>
</li>
<li class="list__item"><p class="paragraph">Since there is no value comparison in Cerebral, a change to a path does not affect the rendering of components depending on parent paths. Traditionally if you change an item in an array, also the array itself has a change. This means that the component handling the array will rerender whenever an item needs to rerender. This is not the case with Cerebral.</p>
</li>
</ol>
<h3 class="heading heading_lvl_3" id="render-state">Render state</h3>
<p class="paragraph">In smaller applications it does not matter that much where you define the state of the application. It is easy to reason about the application because it is small enough to fit in ones head. In larger application it becomes a problem if state is defined &quot;all over the place&quot;. Since Cerebral stores all the state of the application in a single model we need a way to expose that state to the view.</p>
<p class="paragraph">In some frameworks this is done by passing the whole model or collection of models/stores from the top of the application and down from one component to the next. This can become very tedious and fragile as all nested components completely depend on their parent. In Cerebral the state of the application is directly connected to each component:</p>
<pre><code class="code" class="lang-js"><span class="token function" >connect</span><span class="token punctuation" >(</span><span class="token punctuation" >{</span>
  userName<span class="token punctuation" >:</span> <span class="token string" >'app.user.name'</span>
<span class="token punctuation" >}</span><span class="token punctuation" >,</span>
  <span class="token keyword" >function</span> <span class="token function" >User</span><span class="token punctuation" >(</span>props<span class="token punctuation" >)</span> <span class="token punctuation" >{</span>
    props<span class="token punctuation" >.</span>userName <span class="token comment" spellcheck="true">// "some name" (value stored in 'app.user.name')</span>
  <span class="token punctuation" >}</span>
<span class="token punctuation" >)</span>
</code></pre>
<p class="paragraph"><strong>connect</strong> tells Cerebral that the component is interested in a path where the user name happens to be. When that path changes the component will rerender.</p>
<h3 class="heading heading_lvl_3" id="update-state">Update state</h3>
<p class="paragraph">This is where Cerebral really differs from other approaches to application development. Updating the state of an application can be anything from:</p>
<ul class="list">
<li class="list__item">flipping a <strong>true</strong> to a <strong>false</strong></li>
<li class="list__item">setting arbitrary state</li>
<li class="list__item">requesting data from the server and, depending on the status code of the response, do something with that response which might lead to new requests and/or setting up a listener for data on the server</li>
<li class="list__item">reading (and storing) something in local storage</li>
<li class="list__item">etc...</li>
</ul>
<p class="paragraph">The point is, updating state can be a very complex flow of operations. This is often where spaghetti code comes from.</p>
<p class="paragraph">To handle everything from a simple toggle to very complex operations, Cerebral has the concept of <strong>signals</strong>. These allow you to compose functions together into a flow that is not only about the &quot;happy path&quot; but properly takes errors and edge cases into account. You can define many different execution paths based on whatever you want (a status code, an error, some state, etc). This allows you to write decoupled code, while still bringing everything together in the form of a higher abstraction which greatly helps understanding how things relate to one another (in what order they will run, when they will run, etc). Under the hood, signals are based on <a class="link link__control i-bem" data-bem='{"link":{}}' role="link" tabindex="0" href="https://github.com/cerebral/function-tree">function-tree</a>, a project that came out of the initial experimentations in the first version of Cerebral.</p>
<p class="paragraph">Another powerful feature of <strong>signals</strong> (aka function-tree) is that there is a debugger that can track execution and understands when a signal triggers, what functions are run, what state is being updated and what other side effects might be happening.</p>
<h3 class="heading heading_lvl_3" id="summary">Summary</h3>
<p class="paragraph">The architecture of Cerebral is defined to give you insight. The single model, function-tree and the way state is connected the view layer all support this vision. Creating a Cerebral application allows you and your team members to never question what actually happens when a page loads, a specific button is clicked, etc. Decoupling of state, views and state updates also makes it an overall better experience when scaling up an application as the views will be just a dumb layer that transforms a given state to a user interface.</p>
</div></div></div><footer class="footer page__footer"><div class="row"><div class="row__col row__col_sw_24 row__col_lw_6"><h4 class="footer__header">ORGANIZATION</h4><a class="link link__control footer__link i-bem" data-bem='{"link":{}}' role="link" href="../contributors">Contributors</a><a class="link link__control footer__link i-bem" data-bem='{"link":{}}' role="link" href="http://www.webpackbin.com">www.webpackbin.com</a><a class="link link__control footer__link i-bem" data-bem='{"link":{}}' role="link" href="http://www.christianalfoni.com">www.christianalfoni.com</a></div><div class="row__col row__col_sw_24 row__col_lw_6 row__col_lo_3"><h4 class="footer__header">ARTICLES AND USEFUL LINKS</h4><a class="link link__control footer__link i-bem" data-bem='{"link":{}}' role="link" href="http://medium.com/p/5793c08db2cc">The story of Cerebral</a><a class="link link__control footer__link i-bem" data-bem='{"link":{}}' role="link" href="https://gist.github.com/christianalfoni/b08a99faa09df054afe87528a2134730">An unlikely success story</a></div><div class="row__col row__col_sw_24 row__col_lw_6 row__col_lo_6"><h4 class="footer__header">HELP</h4><a class="link link__control footer__link i-bem" data-bem='{"link":{}}' role="link" href="https://github.com/cerebral/cerebral">Cerebral github repo</a><a class="link link__control footer__link i-bem" data-bem='{"link":{}}' role="link" href="https://discord.gg/0kIweV4bd2bwwsvH">Discord chat</a></div></div></footer><script src="../js/scripts.min.js"></script></body></html>