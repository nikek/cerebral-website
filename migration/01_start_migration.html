<!DOCTYPE html><html class="ua_js_no"><head><meta charset="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><title>Cerebral</title><script>(function(e,c){e[c]=e[c].replace(/(ua_js_)no/g,"$1yes");})(document.documentElement,"className");</script><link rel="stylesheet" href="../css/styles.min.css"/><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:700,500,400"/><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto+Mono"/><link rel="shortcut icon" href="../favicon.ico"/><meta name="viewport" content="width=device-width,maximum-scale=1,initial-scale=1,user-scalable=no"/><meta name="format-detection" content="telephone=no"/><link name="apple-mobile-web-app-capable" content="yes"/></head><body class="page page_layout_migration"><div class="page__header"><div class="head-nav"><a class="link link__control head-nav__home i-bem" data-bem='{"link":{}}' role="link" href="../"></a></div></div><div class="page__content"><div class="wip">This documentation is about upcoming cerebral v2 which is currently is work in progress.<br/>Documentation might not always describe actual state of API.<br/>API itself could have some notable changes, though it shouldn't be critical.<br/>Feel free to contribute to docs by clicking Edit on Github link.</div><div class="row"><div class="row__col row__col_sw_24 row__col_lw_5 row__col_sol row__col_mol"><div class="side-nav"><div class="menu menu_theme_islands menu_size_xl menu_mode_radio-check menu__control i-bem" data-bem='{"menu":{}}' role="menu" tabindex="0"><div class="menu__group" role="group" aria-labelledby="uniq14774925620101123"><div class="menu__group-title" role="presentation" id="uniq14774925620101123">Get started</div><div class="menu-item menu-item_type_link menu-item_theme_islands i-bem" data-bem='{"menu-item":{"val":"get-started/01_get-started"}}' role="menuitemradio" id="uniq14774925620101124" aria-checked="false"><a class="link link__control i-bem" data-bem='{"link":{}}' role="link" href="../get-started/01_get-started.html">Get started</a></div><div class="menu-item menu-item_type_link menu-item_theme_islands i-bem" data-bem='{"menu-item":{"val":"get-started/02_store-state"}}' role="menuitemradio" id="uniq14774925620101125" aria-checked="false"><a class="link link__control i-bem" data-bem='{"link":{}}' role="link" href="../get-started/02_store-state.html">Store state</a></div><div class="menu-item menu-item_type_link menu-item_theme_islands i-bem" data-bem='{"menu-item":{"val":"get-started/03_render-state"}}' role="menuitemradio" id="uniq14774925620101126" aria-checked="false"><a class="link link__control i-bem" data-bem='{"link":{}}' role="link" href="../get-started/03_render-state.html">Render state</a></div><div class="menu-item menu-item_type_link menu-item_theme_islands i-bem" data-bem='{"menu-item":{"val":"get-started/04_update-state"}}' role="menuitemradio" id="uniq14774925620101127" aria-checked="false"><a class="link link__control i-bem" data-bem='{"link":{}}' role="link" href="../get-started/04_update-state.html">Update state</a></div><div class="menu-item menu-item_type_link menu-item_theme_islands i-bem" data-bem='{"menu-item":{"val":"get-started/05_challenge"}}' role="menuitemradio" id="uniq14774925620101128" aria-checked="false"><a class="link link__control i-bem" data-bem='{"link":{}}' role="link" href="../get-started/05_challenge.html">Challenge</a></div></div><div class="menu__group" role="group" aria-labelledby="uniq14774925620101129"><div class="menu__group-title" role="presentation" id="uniq14774925620101129">Concepts</div><div class="menu-item menu-item_type_link menu-item_theme_islands i-bem" data-bem='{"menu-item":{"val":"concepts/01_the-architecture"}}' role="menuitemradio" id="uniq14774925620101130" aria-checked="false"><a class="link link__control i-bem" data-bem='{"link":{}}' role="link" href="../concepts/01_the-architecture.html">The architecture</a></div><div class="menu-item menu-item_type_link menu-item_theme_islands i-bem" data-bem='{"menu-item":{"val":"concepts/02_signals"}}' role="menuitemradio" id="uniq14774925620101131" aria-checked="false"><a class="link link__control i-bem" data-bem='{"link":{}}' role="link" href="../concepts/02_signals.html">Signals</a></div><div class="menu-item menu-item_type_link menu-item_theme_islands i-bem" data-bem='{"menu-item":{"val":"concepts/03_composition"}}' role="menuitemradio" id="uniq14774925620101132" aria-checked="false"><a class="link link__control i-bem" data-bem='{"link":{}}' role="link" href="../concepts/03_composition.html">Composition</a></div><div class="menu-item menu-item_type_link menu-item_theme_islands i-bem" data-bem='{"menu-item":{"val":"concepts/04_namespacing"}}' role="menuitemradio" id="uniq14774925620101133" aria-checked="false"><a class="link link__control i-bem" data-bem='{"link":{}}' role="link" href="../concepts/04_namespacing.html">Namespacing</a></div><div class="menu-item menu-item_type_link menu-item_theme_islands i-bem" data-bem='{"menu-item":{"val":"concepts/05_exposing-state"}}' role="menuitemradio" id="uniq14774925620101134" aria-checked="false"><a class="link link__control i-bem" data-bem='{"link":{}}' role="link" href="../concepts/05_exposing-state.html">Exposing state</a></div></div><div class="menu__group" role="group" aria-labelledby="uniq14774925620101135"><div class="menu__group-title" role="presentation" id="uniq14774925620101135">Getting real</div><div class="menu-item menu-item_type_link menu-item_theme_islands i-bem" data-bem='{"menu-item":{"val":"getting-real/01_community-tools"}}' role="menuitemradio" id="uniq14774925620101136" aria-checked="false"><a class="link link__control i-bem" data-bem='{"link":{}}' role="link" href="../getting-real/01_community-tools.html">Community tools</a></div><div class="menu-item menu-item_type_link menu-item_theme_islands i-bem" data-bem='{"menu-item":{"val":"getting-real/02_organizing"}}' role="menuitemradio" id="uniq14774925620101137" aria-checked="false"><a class="link link__control i-bem" data-bem='{"link":{}}' role="link" href="../getting-real/02_organizing.html">Organizing</a></div><div class="menu-item menu-item_type_link menu-item_theme_islands i-bem" data-bem='{"menu-item":{"val":"getting-real/03_adding-providers"}}' role="menuitemradio" id="uniq14774925620101138" aria-checked="false"><a class="link link__control i-bem" data-bem='{"link":{}}' role="link" href="../getting-real/03_adding-providers.html">Adding providers</a></div><div class="menu-item menu-item_type_link menu-item_theme_islands i-bem" data-bem='{"menu-item":{"val":"getting-real/03_devtools"}}' role="menuitemradio" id="uniq14774925620101139" aria-checked="false"><a class="link link__control i-bem" data-bem='{"link":{}}' role="link" href="../getting-real/03_devtools.html">Devtools</a></div><div class="menu-item menu-item_type_link menu-item_theme_islands i-bem" data-bem='{"menu-item":{"val":"getting-real/05_compute-state"}}' role="menuitemradio" id="uniq14774925620101140" aria-checked="false"><a class="link link__control i-bem" data-bem='{"link":{}}' role="link" href="../getting-real/05_compute-state.html">Compute state</a></div><div class="menu-item menu-item_type_link menu-item_theme_islands i-bem" data-bem='{"menu-item":{"val":"getting-real/06_connecting-to-components"}}' role="menuitemradio" id="uniq14774925620101141" aria-checked="false"><a class="link link__control i-bem" data-bem='{"link":{}}' role="link" href="../getting-real/06_connecting-to-components.html">Connecting to components</a></div><div class="menu-item menu-item_type_link menu-item_theme_islands i-bem" data-bem='{"menu-item":{"val":"getting-real/07_routing"}}' role="menuitemradio" id="uniq14774925620101142" aria-checked="false"><a class="link link__control i-bem" data-bem='{"link":{}}' role="link" href="../getting-real/07_routing.html">Routing</a></div><div class="menu-item menu-item_type_link menu-item_theme_islands i-bem" data-bem='{"menu-item":{"val":"getting-real/08_constants"}}' role="menuitemradio" id="uniq14774925620101143" aria-checked="false"><a class="link link__control i-bem" data-bem='{"link":{}}' role="link" href="../getting-real/08_constants.html">Constants</a></div><div class="menu-item menu-item_type_link menu-item_theme_islands i-bem" data-bem='{"menu-item":{"val":"getting-real/09_server-side"}}' role="menuitemradio" id="uniq14774925620101144" aria-checked="false"><a class="link link__control i-bem" data-bem='{"link":{}}' role="link" href="../getting-real/09_server-side.html">Server side</a></div><div class="menu-item menu-item_type_link menu-item_theme_islands i-bem" data-bem='{"menu-item":{"val":"getting-real/10_testing"}}' role="menuitemradio" id="uniq14774925620101145" aria-checked="false"><a class="link link__control i-bem" data-bem='{"link":{}}' role="link" href="../getting-real/10_testing.html">Testing</a></div></div><div class="menu__group" role="group" aria-labelledby="uniq14774925620101146"><div class="menu__group-title" role="presentation" id="uniq14774925620101146">Migration</div><div class="menu-item menu-item_type_link menu-item_checked menu-item_theme_islands i-bem" data-bem='{"menu-item":{"val":"migration/01_start_migration"}}' role="menuitemradio" id="uniq14774925620101147" aria-checked="true"><a class="link link__control i-bem" data-bem='{"link":{}}' role="link" href="../migration/01_start_migration.html">From 1.x to 2.x</a></div></div><div class="menu__group" role="group" aria-labelledby="uniq14774925620101148"><div class="menu__group-title" role="presentation" id="uniq14774925620101148">API</div><div class="menu-item menu-item_type_link menu-item_theme_islands i-bem" data-bem='{"menu-item":{"val":"api/01_controller"}}' role="menuitemradio" id="uniq14774925620101149" aria-checked="false"><a class="link link__control i-bem" data-bem='{"link":{}}' role="link" href="../api/01_controller.html">Controller</a></div><div class="menu-item menu-item_type_link menu-item_theme_islands i-bem" data-bem='{"menu-item":{"val":"api/02_state"}}' role="menuitemradio" id="uniq14774925620101150" aria-checked="false"><a class="link link__control i-bem" data-bem='{"link":{}}' role="link" href="../api/02_state.html">State</a></div><div class="menu-item menu-item_type_link menu-item_theme_islands i-bem" data-bem='{"menu-item":{"val":"api/03_signals"}}' role="menuitemradio" id="uniq14774925620101151" aria-checked="false"><a class="link link__control i-bem" data-bem='{"link":{}}' role="link" href="../api/03_signals.html">Signals</a></div><div class="menu-item menu-item_type_link menu-item_theme_islands i-bem" data-bem='{"menu-item":{"val":"api/04_modules"}}' role="menuitemradio" id="uniq14774925620101152" aria-checked="false"><a class="link link__control i-bem" data-bem='{"link":{}}' role="link" href="../api/04_modules.html">Modules</a></div><div class="menu-item menu-item_type_link menu-item_theme_islands i-bem" data-bem='{"menu-item":{"val":"api/05_operators"}}' role="menuitemradio" id="uniq14774925620101153" aria-checked="false"><a class="link link__control i-bem" data-bem='{"link":{}}' role="link" href="../api/05_operators.html">Operators</a></div><div class="menu-item menu-item_type_link menu-item_theme_islands i-bem" data-bem='{"menu-item":{"val":"api/06_providers"}}' role="menuitemradio" id="uniq14774925620101154" aria-checked="false"><a class="link link__control i-bem" data-bem='{"link":{}}' role="link" href="../api/06_providers.html">Providers</a></div><div class="menu-item menu-item_type_link menu-item_theme_islands i-bem" data-bem='{"menu-item":{"val":"api/07_connect"}}' role="menuitemradio" id="uniq14774925620101155" aria-checked="false"><a class="link link__control i-bem" data-bem='{"link":{}}' role="link" href="../api/07_connect.html">Connect</a></div><div class="menu-item menu-item_type_link menu-item_theme_islands i-bem" data-bem='{"menu-item":{"val":"api/08_router"}}' role="menuitemradio" id="uniq14774925620101156" aria-checked="false"><a class="link link__control i-bem" data-bem='{"link":{}}' role="link" href="../api/08_router.html">Router</a></div></div></div></div></div><div class="row__col row__col_sw_24 row__col_lw_18 row__col_lo_1"><div class="page__edit"><a class="link link_theme_islands link__control i-bem" data-bem='{"link":{}}' role="link" href="https://github.com/cerebral/cerebral-website/blob/v3/content/migration/01_start_migration.en.md">Edit on GitHub</a></div><h2 class="heading heading_lvl_2" id="from-1-x-to-2-x">From 1.x to 2.x</h2>
<p class="paragraph">To migrate from 1.x to 2.x you need to take the following under consideration.</p>
<ul class="list">
<li class="list__item">There are no models left to choose from. Cerebral comes with one model.</li>
<li class="list__item">Services is removed in favor of function-tree/providers</li>
</ul>
<h3 class="heading heading_lvl_3" id="controller">Controller</h3>
<p class="paragraph">Instead of choosing your model and connect to the <em>Controller</em> as in 1.x as shown below</p>
<pre><code class="code" class="lang-js"><span class="token keyword" >import</span> <span class="token punctuation" >{</span>Controller<span class="token punctuation" >}</span> <span class="token keyword" >from</span> <span class="token string" >'cerebral'</span>
<span class="token keyword" >import</span> Model <span class="token keyword" >from</span> <span class="token string" >'cerebral/models/immutable'</span>

<span class="token keyword" >const</span> controller <span class="token operator" >=</span> <span class="token function" >Controller</span><span class="token punctuation" >(</span><span class="token function" >Model</span><span class="token punctuation" >(</span><span class="token punctuation" >{</span>
  <span class="token comment" spellcheck="true">// You can add some initial state here if you want</span>
<span class="token punctuation" >}</span><span class="token punctuation" >)</span><span class="token punctuation" >)</span>

<span class="token keyword" >export</span> <span class="token keyword" >default</span> controller
</code></pre>
<p class="paragraph">You would simple do the following in 2.x</p>
<pre><code class="code" class="lang-js"><span class="token keyword" >import</span> <span class="token punctuation" >{</span>Controller<span class="token punctuation" >}</span> <span class="token keyword" >from</span> <span class="token string" >'cerebral'</span>

<span class="token keyword" >const</span> controller <span class="token operator" >=</span> <span class="token function" >Controller</span><span class="token punctuation" >(</span><span class="token punctuation" >{</span>
  <span class="token comment" spellcheck="true">// You can add some initial state here if you want</span>
<span class="token punctuation" >}</span><span class="token punctuation" >)</span>

<span class="token keyword" >export</span> <span class="token keyword" >default</span> controller
</code></pre>
<h3 class="heading heading_lvl_3" id="modules">Modules</h3>
<p class="paragraph">In 1.x you would have done something like this.</p>
<pre><code class="code" class="lang-js"><span class="token keyword" >import</span> <span class="token punctuation" >{</span>Controller<span class="token punctuation" >}</span> <span class="token keyword" >from</span> <span class="token string" >'cerebral'</span>
<span class="token keyword" >import</span> Model <span class="token keyword" >from</span> <span class="token string" >'cerebral/models/immutable'</span>

<span class="token keyword" >import</span> Home <span class="token keyword" >from</span> <span class="token string" >'./modules/Home'</span>
<span class="token keyword" >import</span> Admin <span class="token keyword" >from</span> <span class="token string" >'./modules/Admin'</span>

<span class="token keyword" >const</span> controller <span class="token operator" >=</span> <span class="token function" >Controller</span><span class="token punctuation" >(</span><span class="token function" >Model</span><span class="token punctuation" >(</span><span class="token punctuation" >{</span><span class="token punctuation" >}</span><span class="token punctuation" >)</span><span class="token punctuation" >)</span>

controller<span class="token punctuation" >.</span><span class="token function" >addModules</span><span class="token punctuation" >(</span><span class="token punctuation" >{</span>
  home<span class="token punctuation" >:</span> Home<span class="token punctuation" >,</span>
  admin<span class="token punctuation" >:</span> Admin
<span class="token punctuation" >}</span><span class="token punctuation" >)</span>

<span class="token keyword" >export</span> <span class="token keyword" >default</span> controller
</code></pre>
<p class="paragraph">In 2.x it&#39;s a simpler process.</p>
<pre><code class="code" class="lang-js"><span class="token keyword" >import</span> <span class="token punctuation" >{</span>Controller<span class="token punctuation" >}</span> <span class="token keyword" >from</span> <span class="token string" >'cerebral'</span>

<span class="token keyword" >import</span> Home <span class="token keyword" >from</span> <span class="token string" >'./modules/Home'</span>
<span class="token keyword" >import</span> Admin <span class="token keyword" >from</span> <span class="token string" >'./modules/Admin'</span>

<span class="token keyword" >const</span> controller <span class="token operator" >=</span> <span class="token function" >Controller</span><span class="token punctuation" >(</span><span class="token punctuation" >{</span>
  modules<span class="token punctuation" >:</span> <span class="token punctuation" >{</span>
    home<span class="token punctuation" >:</span> <span class="token function" >Home</span><span class="token punctuation" >(</span><span class="token punctuation" >)</span><span class="token punctuation" >,</span>
    admin<span class="token punctuation" >:</span> <span class="token function" >Admin</span><span class="token punctuation" >(</span><span class="token punctuation" >)</span>
  <span class="token punctuation" >}</span>
<span class="token punctuation" >}</span><span class="token punctuation" >)</span>

<span class="token keyword" >export</span> <span class="token keyword" >default</span> controller
</code></pre>
<h3 class="heading heading_lvl_3" id="signals">Signals</h3>
<p class="paragraph">You handle signals mostly the same way as in 1.x. You can describe signals in a module or in the controller directly.</p>
<h4 class="heading heading_lvl_4" id="1-x">1.x</h4>
<pre><code class="code" class="lang-js"><span class="token keyword" >import</span> <span class="token punctuation" >{</span>Controller<span class="token punctuation" >}</span> <span class="token keyword" >from</span> <span class="token string" >'cerebral'</span>
<span class="token keyword" >import</span> Model <span class="token keyword" >from</span> <span class="token string" >'cerebral-model-immutable'</span>
<span class="token keyword" >import</span> doSomething <span class="token keyword" >from</span> <span class="token string" >'./chains/doSomething'</span>

<span class="token keyword" >const</span> controller <span class="token operator" >=</span> <span class="token function" >Controller</span><span class="token punctuation" >(</span><span class="token function" >Model</span><span class="token punctuation" >(</span><span class="token punctuation" >{</span><span class="token punctuation" >}</span><span class="token punctuation" >)</span><span class="token punctuation" >)</span>

controller<span class="token punctuation" >.</span><span class="token function" >addSignals</span><span class="token punctuation" >(</span><span class="token punctuation" >{</span>
  buttonClicked<span class="token punctuation" >:</span> doSomething
<span class="token punctuation" >}</span><span class="token punctuation" >)</span>
</code></pre>
<h4 class="heading heading_lvl_4" id="2-x">2.x</h4>
<pre><code class="code" class="lang-js"><span class="token keyword" >import</span> <span class="token punctuation" >{</span>Controller<span class="token punctuation" >}</span> <span class="token keyword" >from</span> <span class="token string" >'cerebral'</span>
<span class="token keyword" >import</span> doSomething <span class="token keyword" >from</span> <span class="token string" >'./chains/doSomething'</span>

<span class="token keyword" >const</span> controller <span class="token operator" >=</span> <span class="token function" >Controller</span><span class="token punctuation" >(</span><span class="token punctuation" >{</span>
  signals<span class="token punctuation" >:</span> <span class="token punctuation" >{</span>
    buttonClicked<span class="token punctuation" >:</span> doSomething
  <span class="token punctuation" >}</span>
<span class="token punctuation" >}</span><span class="token punctuation" >)</span>
</code></pre>
<p class="paragraph">One note when using signals is that the <strong>immediate</strong> option is gone. This keeps the api cleaner.</p>
<h3 class="heading heading_lvl_3" id="actions">Actions</h3>
<p class="paragraph">Since cerebral 2.x is using <strong>function-tree</strong> under the hood we have other, more powerful options then before. The input, state is the same but output is gone. You can just return an object from the action that will be available in the input for the next action. You can also return a <strong>path</strong> that is a new concept in Cerebral 2.x and outdates output. <strong>path</strong> is used to determine the execution path for your chain. You do no longer have services as an argument in the context put rather providers instead.</p>
<h4 class="heading heading_lvl_4" id="1-x">1.x</h4>
<pre><code class="code" class="lang-js"><span class="token keyword" >function</span> <span class="token function" >myAction</span><span class="token punctuation" >(</span><span class="token punctuation" >{</span>input<span class="token punctuation" >,</span> state<span class="token punctuation" >,</span> output<span class="token punctuation" >,</span> services<span class="token punctuation" >}</span><span class="token punctuation" >)</span> <span class="token punctuation" >{</span>

<span class="token punctuation" >}</span>
</code></pre>
<p class="paragraph">In 2.x you have the following. Instead of services you hook up providers that superseeds services.</p>
<pre><code class="code" class="lang-js"><span class="token keyword" >function</span> <span class="token function" >myAction</span><span class="token punctuation" >(</span><span class="token punctuation" >{</span>input<span class="token punctuation" >,</span> state<span class="token punctuation" >,</span> path<span class="token punctuation" >}</span><span class="token punctuation" >)</span> <span class="token punctuation" >{</span>

<span class="token punctuation" >}</span>
</code></pre>
<p class="paragraph">When you wanted to output to paths in 1.x you would do something like this.</p>
<pre><code class="code" class="lang-js"><span class="token keyword" >function</span> <span class="token function" >myAction</span><span class="token punctuation" >(</span><span class="token punctuation" >{</span>state<span class="token punctuation" >,</span> output<span class="token punctuation" >}</span><span class="token punctuation" >)</span> <span class="token punctuation" >{</span>
  <span class="token keyword" >if</span> <span class="token punctuation" >(</span>state<span class="token punctuation" >.</span><span class="token keyword" >get</span><span class="token punctuation" >(</span><span class="token string" >'app.isAwesome'</span><span class="token punctuation" >)</span><span class="token punctuation" >)</span> <span class="token punctuation" >{</span>
    output<span class="token punctuation" >.</span><span class="token function" >awesome</span><span class="token punctuation" >(</span><span class="token punctuation" >)</span>
  <span class="token punctuation" >}</span> <span class="token keyword" >else</span> <span class="token punctuation" >{</span>
    output<span class="token punctuation" >.</span><span class="token function" >notSoAwesome</span><span class="token punctuation" >(</span><span class="token punctuation" >)</span>
  <span class="token punctuation" >}</span>
<span class="token punctuation" >}</span>
myAction<span class="token punctuation" >.</span>outputs <span class="token operator" >=</span> <span class="token punctuation" >[</span><span class="token string" >'awesome'</span><span class="token punctuation" >,</span> <span class="token string" >'notSoAwesome'</span><span class="token punctuation" >]</span>
</code></pre>
<p class="paragraph">With the new <strong>path</strong> concept this is simpler. In 2.x you would just do what is stated below. Please note the <strong>return path...</strong>.</p>
<pre><code class="code" class="lang-js"><span class="token keyword" >function</span> <span class="token function" >myAction</span><span class="token punctuation" >(</span><span class="token punctuation" >{</span>state<span class="token punctuation" >,</span> path<span class="token punctuation" >}</span><span class="token punctuation" >)</span> <span class="token punctuation" >{</span>
  <span class="token keyword" >if</span> <span class="token punctuation" >(</span>state<span class="token punctuation" >.</span><span class="token keyword" >get</span><span class="token punctuation" >(</span><span class="token string" >'app.isAwesome'</span><span class="token punctuation" >)</span><span class="token punctuation" >)</span> <span class="token punctuation" >{</span>
    <span class="token keyword" >return</span> path<span class="token punctuation" >.</span><span class="token function" >awesome</span><span class="token punctuation" >(</span><span class="token punctuation" >)</span>
  <span class="token punctuation" >}</span> <span class="token keyword" >else</span> <span class="token punctuation" >{</span>
    <span class="token keyword" >return</span> path<span class="token punctuation" >.</span><span class="token function" >notSoAwesome</span><span class="token punctuation" >(</span><span class="token punctuation" >)</span>
  <span class="token punctuation" >}</span>
<span class="token punctuation" >}</span>
</code></pre>
<p class="paragraph">If you don&#39;t want to take another path in the execution tree you could return a new object that would be available in the input object.</p>
<pre><code class="code" class="lang-js"><span class="token keyword" >function</span> <span class="token function" >myAction</span><span class="token punctuation" >(</span><span class="token punctuation" >{</span>state<span class="token punctuation" >,</span> path<span class="token punctuation" >}</span><span class="token punctuation" >)</span> <span class="token punctuation" >{</span>
  <span class="token keyword" >return</span> <span class="token punctuation" >{</span>
    someData<span class="token punctuation" >:</span> <span class="token string" >'Some new data available at output.someData'</span>
  <span class="token punctuation" >}</span>
<span class="token punctuation" >}</span>
</code></pre>
<p class="paragraph">When doing async operations you would do something like this in 1.x</p>
<pre><code class="code" class="lang-js"><span class="token keyword" >function</span> <span class="token function" >myAction</span><span class="token punctuation" >(</span><span class="token punctuation" >{</span>services<span class="token punctuation" >}</span><span class="token punctuation" >)</span> <span class="token punctuation" >{</span>
  <span class="token comment" spellcheck="true">// do something async</span>
<span class="token punctuation" >}</span>

myAction<span class="token punctuation" >.</span><span class="token keyword" >async</span> <span class="token operator" >=</span> <span class="token boolean" >true</span>
</code></pre>
<p class="paragraph">In Cerebral 2 you can leave that out and just resolve or reject a promise.</p>
<p class="paragraph">In 1.x you could set a path that wasn&#39;t defined yet in the state tree. Let&#39;s say your state looked like this.</p>
<pre><code class="code" class="lang-js"><span class="token punctuation" >{</span>
  app<span class="token punctuation" >:</span> <span class="token punctuation" >{</span>
    nodes<span class="token punctuation" >:</span> <span class="token punctuation" >{</span><span class="token punctuation" >}</span>
  <span class="token punctuation" >}</span>
<span class="token punctuation" >}</span>
</code></pre>
<p class="paragraph">You could do this in an action.</p>
<pre><code class="code" class="lang-js"><span class="token keyword" >function</span> <span class="token function" >myAction</span><span class="token punctuation" >(</span><span class="token punctuation" >{</span>state<span class="token punctuation" >}</span><span class="token punctuation" >)</span> <span class="token punctuation" >{</span>
  state<span class="token punctuation" >.</span><span class="token keyword" >set</span><span class="token punctuation" >(</span><span class="token string" >'app.nodes.some.state.more'</span><span class="token punctuation" >,</span> <span class="token punctuation" >{</span>updated<span class="token punctuation" >:</span> <span class="token boolean" >true</span><span class="token punctuation" >}</span><span class="token punctuation" >)</span>
<span class="token punctuation" >}</span>
</code></pre>
<p class="paragraph">With 2.x this is no longer possible. It&#39;s easy to mistype paths and therefore this option is no longer available. Your paths need to be in place before setting values to them.</p>
<p class="paragraph">When using computed data in an action you could call <strong>state.computed(myComputed())</strong> in the action. This has changed in 2.x in favor of
<strong>state.compute(myComputed())</strong>. You can also pass props to the compute function.</p>
<pre><code class="code" class="lang-js"><span class="token keyword" >function</span> <span class="token function" >myAction</span><span class="token punctuation" >(</span><span class="token punctuation" >{</span>state<span class="token punctuation" >}</span><span class="token punctuation" >)</span> <span class="token punctuation" >{</span>
  state<span class="token punctuation" >.</span><span class="token function" >compute</span><span class="token punctuation" >(</span>someComputed<span class="token punctuation" >)</span>
  state<span class="token punctuation" >.</span><span class="token function" >compute</span><span class="token punctuation" >(</span>someComputed<span class="token punctuation" >.</span><span class="token function" >props</span><span class="token punctuation" >(</span><span class="token punctuation" >{</span>foo<span class="token punctuation" >:</span> <span class="token string" >'bar'</span><span class="token punctuation" >}</span><span class="token punctuation" >)</span>
<span class="token punctuation" >}</span>
</code></pre>
<p class="paragraph">This works the same in context for 2.x</p>
<pre><code class="code" class="lang-js"><span class="token function" >connect</span><span class="token punctuation" >(</span><span class="token punctuation" >{</span>
  foo<span class="token punctuation" >:</span> someComputed<span class="token punctuation" >,</span>
  foo2<span class="token punctuation" >:</span> someComputed<span class="token punctuation" >.</span><span class="token function" >props</span><span class="token punctuation" >(</span><span class="token punctuation" >{</span>foo<span class="token punctuation" >:</span> <span class="token string" >'bar'</span><span class="token punctuation" >}</span><span class="token punctuation" >)</span>
<span class="token punctuation" >}</span><span class="token punctuation" >)</span>
</code></pre>
<h3 class="heading heading_lvl_3" id="providers-outdates-services-">Providers (outdates services)</h3>
<p class="paragraph">In 1.x you could add services that would be available to you in the actions. Typically you would do something like this in 1.x</p>
<pre><code class="code" class="lang-js"><span class="token keyword" >import</span> someExternalApi <span class="token keyword" >from</span> <span class="token string" >'some-external-api'</span>

<span class="token keyword" >export</span> <span class="token keyword" >default</span> <span class="token punctuation" >(</span>options <span class="token operator" >=</span> <span class="token punctuation" >{</span><span class="token punctuation" >}</span><span class="token punctuation" >)</span> <span class="token operator" >=</span><span class="token operator" >></span> module <span class="token operator" >=</span><span class="token operator" >></span> <span class="token punctuation" >{</span>

  <span class="token keyword" >if</span> <span class="token punctuation" >(</span><span class="token operator" >!</span>options<span class="token punctuation" >.</span>apiKey<span class="token punctuation" >)</span> <span class="token punctuation" >{</span>
    <span class="token keyword" >throw</span> <span class="token keyword" >new</span> <span class="token class-name" >Error</span><span class="token punctuation" >(</span><span class="token string" >'This service needs an apiKey'</span><span class="token punctuation" >)</span>
  <span class="token punctuation" >}</span>

  module<span class="token punctuation" >.</span><span class="token function" >addServices</span><span class="token punctuation" >(</span><span class="token punctuation" >{</span>
    <span class="token function" >connect</span><span class="token punctuation" >(</span><span class="token punctuation" >)</span> <span class="token punctuation" >{</span>
      <span class="token keyword" >return</span> someExternalApi<span class="token punctuation" >.</span><span class="token function" >connect</span><span class="token punctuation" >(</span><span class="token punctuation" >{</span>
        apiKey<span class="token punctuation" >:</span> options<span class="token punctuation" >.</span>apiKey
      <span class="token punctuation" >}</span><span class="token punctuation" >)</span>
    <span class="token punctuation" >}</span>
  <span class="token punctuation" >}</span><span class="token punctuation" >)</span>

<span class="token punctuation" >}</span>
</code></pre>
<p class="paragraph">In 2.x you would use providers instead.</p>
<pre><code class="code" class="lang-js"><span class="token keyword" >import</span> <span class="token punctuation" >{</span>Controller<span class="token punctuation" >}</span> <span class="token keyword" >from</span> <span class="token string" >'cerebral'</span>
<span class="token keyword" >import</span> ContextProvider <span class="token keyword" >from</span> <span class="token string" >'cerebral/providers/context'</span>
<span class="token keyword" >import</span> axios <span class="token keyword" >from</span> <span class="token string" >'axios'</span>

<span class="token keyword" >const</span> controller <span class="token operator" >=</span> <span class="token function" >Controller</span><span class="token punctuation" >(</span><span class="token punctuation" >{</span>
  providers<span class="token punctuation" >:</span> <span class="token punctuation" >[</span>
    <span class="token function" >ContextProvider</span><span class="token punctuation" >(</span><span class="token punctuation" >{</span>
      axios
    <span class="token punctuation" >}</span><span class="token punctuation" >)</span>
  <span class="token punctuation" >]</span>
<span class="token punctuation" >}</span><span class="token punctuation" >)</span>
</code></pre>
<p class="paragraph">Now instead of having services in the context object in an action you would have the <strong>axios</strong> object.</p>
<pre><code class="code" class="lang-js"><span class="token keyword" >function</span> <span class="token function" >myAction</span><span class="token punctuation" >(</span><span class="token punctuation" >{</span>axios<span class="token punctuation" >}</span><span class="token punctuation" >)</span> <span class="token punctuation" >{</span>

<span class="token punctuation" >}</span>
</code></pre>
<h3 class="heading heading_lvl_3" id="views">Views</h3>
<p class="paragraph">How you import view specific packages has changed. In 1.x you would import Container like this.</p>
<pre><code class="code" class="lang-js"><span class="token keyword" >import</span> controller <span class="token keyword" >from</span> <span class="token string" >'./controller.js'</span>
<span class="token keyword" >import</span> React <span class="token keyword" >from</span> <span class="token string" >'react'</span>
<span class="token keyword" >import</span> <span class="token punctuation" >{</span>render<span class="token punctuation" >}</span> <span class="token keyword" >from</span> <span class="token string" >'react-dom'</span>
<span class="token keyword" >import</span> <span class="token punctuation" >{</span>Container<span class="token punctuation" >}</span> <span class="token keyword" >from</span> <span class="token string" >'cerebral-view-react'</span>

<span class="token comment" spellcheck="true">// Your main application component</span>
<span class="token keyword" >import</span> App <span class="token keyword" >from</span> <span class="token string" >'./components/App'</span>

<span class="token function" >render</span><span class="token punctuation" >(</span>
  <span class="token operator" >&lt;</span>Container controller<span class="token operator" >=</span><span class="token punctuation" >{</span>controller<span class="token punctuation" >}</span><span class="token operator" >></span>
    <span class="token operator" >&lt;</span>App<span class="token operator" >/</span><span class="token operator" >></span>
  <span class="token operator" >&lt;</span><span class="token operator" >/</span>Container<span class="token operator" >></span>
<span class="token punctuation" >,</span> document<span class="token punctuation" >.</span><span class="token function" >querySelector</span><span class="token punctuation" >(</span><span class="token string" >'#app'</span><span class="token punctuation" >)</span><span class="token punctuation" >)</span>
</code></pre>
<p class="paragraph">In 2.x you would not import the Container from another package.</p>
<pre><code class="code" class="lang-js"><span class="token keyword" >import</span> controller <span class="token keyword" >from</span> <span class="token string" >'./controller.js'</span>
<span class="token keyword" >import</span> React <span class="token keyword" >from</span> <span class="token string" >'react'</span>
<span class="token keyword" >import</span> <span class="token punctuation" >{</span>render<span class="token punctuation" >}</span> <span class="token keyword" >from</span> <span class="token string" >'react-dom'</span>
<span class="token keyword" >import</span> <span class="token punctuation" >{</span>Container<span class="token punctuation" >}</span> <span class="token keyword" >from</span> <span class="token string" >'cerebral/react'</span>

<span class="token comment" spellcheck="true">// Your main application component</span>
<span class="token keyword" >import</span> App <span class="token keyword" >from</span> <span class="token string" >'./components/App'</span>

<span class="token function" >render</span><span class="token punctuation" >(</span>
  <span class="token operator" >&lt;</span>Container controller<span class="token operator" >=</span><span class="token punctuation" >{</span>controller<span class="token punctuation" >}</span><span class="token operator" >></span>
    <span class="token operator" >&lt;</span>App<span class="token operator" >/</span><span class="token operator" >></span>
  <span class="token operator" >&lt;</span><span class="token operator" >/</span>Container<span class="token operator" >></span>
<span class="token punctuation" >,</span> document<span class="token punctuation" >.</span><span class="token function" >querySelector</span><span class="token punctuation" >(</span><span class="token string" >'#app'</span><span class="token punctuation" >)</span><span class="token punctuation" >)</span>
</code></pre>
<p class="paragraph">The same is true when connecting Cerebral to your component. In 1.x you would import it like this.</p>
<pre><code class="code" class="lang-js"><span class="token keyword" >import</span> React <span class="token keyword" >from</span> <span class="token string" >'react'</span><span class="token punctuation" >;</span>
<span class="token keyword" >import</span> <span class="token punctuation" >{</span>connect<span class="token punctuation" >}</span> <span class="token keyword" >from</span> <span class="token string" >'cerebral-view-react'</span><span class="token punctuation" >;</span>

<span class="token keyword" >export</span> <span class="token keyword" >default</span> <span class="token function" >connect</span><span class="token punctuation" >(</span><span class="token punctuation" >{</span>
  isLoading<span class="token punctuation" >:</span> <span class="token string" >'app.isLoading'</span>
<span class="token punctuation" >}</span><span class="token punctuation" >,</span>
  <span class="token keyword" >function</span> <span class="token function" >App</span><span class="token punctuation" >(</span>props<span class="token punctuation" >)</span> <span class="token punctuation" >{</span>
    <span class="token keyword" >return</span> <span class="token punctuation" >(</span>
      <span class="token operator" >&lt;</span>div<span class="token operator" >></span>
        <span class="token punctuation" >{</span>props<span class="token punctuation" >.</span>isLoading <span class="token operator" >?</span> <span class="token string" >'loading...'</span> <span class="token punctuation" >:</span> <span class="token keyword" >null</span><span class="token punctuation" >}</span>
      <span class="token operator" >&lt;</span><span class="token operator" >/</span>div<span class="token operator" >></span>
    <span class="token punctuation" >)</span>
  <span class="token punctuation" >}</span>
<span class="token punctuation" >)</span>
</code></pre>
<p class="paragraph">In 2.x you would have to use a different import.</p>
<pre><code class="code" class="lang-js"><span class="token keyword" >import</span> React <span class="token keyword" >from</span> <span class="token string" >'react'</span><span class="token punctuation" >;</span>
<span class="token keyword" >import</span> <span class="token punctuation" >{</span>connect<span class="token punctuation" >}</span> <span class="token keyword" >from</span> <span class="token string" >'cerebral/react'</span><span class="token punctuation" >;</span>

<span class="token keyword" >export</span> <span class="token keyword" >default</span> <span class="token function" >connect</span><span class="token punctuation" >(</span><span class="token punctuation" >{</span>
  isLoading<span class="token punctuation" >:</span> <span class="token string" >'app.isLoading'</span>
<span class="token punctuation" >}</span><span class="token punctuation" >,</span>
  <span class="token keyword" >function</span> <span class="token function" >App</span><span class="token punctuation" >(</span>props<span class="token punctuation" >)</span> <span class="token punctuation" >{</span>
    <span class="token keyword" >return</span> <span class="token punctuation" >(</span>
      <span class="token operator" >&lt;</span>div<span class="token operator" >></span>
        <span class="token punctuation" >{</span>props<span class="token punctuation" >.</span>isLoading <span class="token operator" >?</span> <span class="token string" >'loading...'</span> <span class="token punctuation" >:</span> <span class="token keyword" >null</span><span class="token punctuation" >}</span>
      <span class="token operator" >&lt;</span><span class="token operator" >/</span>div<span class="token operator" >></span>
    <span class="token punctuation" >)</span>
  <span class="token punctuation" >}</span>
<span class="token punctuation" >)</span>
</code></pre>
<h3 class="heading heading_lvl_3" id="strict-render-mode">Strict render mode</h3>
<p class="paragraph">To setup strict render mode in 1.x for React was specified as follows.</p>
<pre><code class="code" class="lang-js"><span class="token function" >render</span><span class="token punctuation" >(</span>
  <span class="token operator" >&lt;</span>Container controller<span class="token operator" >=</span><span class="token punctuation" >{</span>controller<span class="token punctuation" >}</span> strict<span class="token operator" >></span>
    <span class="token operator" >&lt;</span>App<span class="token operator" >/</span><span class="token operator" >></span>
  <span class="token operator" >&lt;</span><span class="token operator" >/</span>Container<span class="token operator" >></span>
<span class="token punctuation" >,</span> document<span class="token punctuation" >.</span><span class="token function" >querySelector</span><span class="token punctuation" >(</span><span class="token string" >'#app'</span><span class="token punctuation" >)</span><span class="token punctuation" >)</span>
</code></pre>
<p class="paragraph">In 2.x you need to specify this in the controller</p>
<pre><code class="code" class="lang-js"><span class="token keyword" >import</span> <span class="token punctuation" >{</span>Controller<span class="token punctuation" >}</span> <span class="token keyword" >from</span> <span class="token string" >'cerebral'</span>
<span class="token keyword" >import</span> Devtools <span class="token keyword" >from</span> <span class="token string" >'cerebral/devtools'</span>

<span class="token keyword" >const</span> controller <span class="token operator" >=</span> <span class="token function" >Controller</span><span class="token punctuation" >(</span><span class="token punctuation" >{</span>
  strictRender<span class="token punctuation" >:</span> <span class="token boolean" >true</span>
<span class="token punctuation" >}</span><span class="token punctuation" >)</span>

<span class="token keyword" >export</span> <span class="token keyword" >default</span> controller
</code></pre>
<h3 class="heading heading_lvl_3" id="devtools">Devtools</h3>
<p class="paragraph">The devtools has changed as well. Go to chrome store and install cerebral2 debugger. The setup has slightly changed from 1.x to 2.x as well as the import.</p>
<h4 class="heading heading_lvl_4" id="1-x">1.x</h4>
<pre><code class="code" class="lang-js"><span class="token keyword" >import</span> Controller <span class="token keyword" >from</span> <span class="token string" >'cerebral'</span>
<span class="token keyword" >import</span> Model <span class="token keyword" >from</span> <span class="token string" >'cerebral/model/immutable'</span>
<span class="token keyword" >import</span> Devtools <span class="token keyword" >from</span> <span class="token string" >'cerebral-module-devtools'</span>

<span class="token keyword" >const</span> controller <span class="token operator" >=</span> <span class="token function" >Controller</span><span class="token punctuation" >(</span><span class="token function" >Model</span><span class="token punctuation" >(</span><span class="token punctuation" >{</span><span class="token punctuation" >}</span><span class="token punctuation" >)</span><span class="token punctuation" >)</span>

controller<span class="token punctuation" >.</span><span class="token function" >addModules</span><span class="token punctuation" >(</span><span class="token punctuation" >{</span>
  devtools<span class="token punctuation" >:</span> process<span class="token punctuation" >.</span>env<span class="token punctuation" >.</span>NODE_ENV <span class="token operator" >===</span> <span class="token string" >'production'</span> <span class="token operator" >?</span> <span class="token punctuation" >(</span><span class="token punctuation" >)</span> <span class="token operator" >=</span><span class="token operator" >></span> <span class="token punctuation" >{</span><span class="token punctuation" >}</span> <span class="token punctuation" >:</span> <span class="token function" >Devtools</span><span class="token punctuation" >(</span><span class="token punctuation" >)</span>
<span class="token punctuation" >}</span><span class="token punctuation" >)</span>

<span class="token keyword" >export</span> <span class="token keyword" >default</span> controller
</code></pre>
<h4 class="heading heading_lvl_4" id="2-x">2.x</h4>
<pre><code class="code" class="lang-js"><span class="token keyword" >import</span> Controller <span class="token keyword" >from</span> <span class="token string" >'cerebral'</span>
<span class="token keyword" >import</span> Devtools <span class="token keyword" >from</span> <span class="token string" >'cerebra/devtools'</span>

<span class="token keyword" >const</span> controller <span class="token operator" >=</span> <span class="token function" >Controller</span><span class="token punctuation" >(</span><span class="token punctuation" >{</span>
  devtools<span class="token punctuation" >:</span> process<span class="token punctuation" >.</span>env<span class="token punctuation" >.</span>NODE_ENV <span class="token operator" >===</span> <span class="token string" >'production'</span> <span class="token operator" >?</span> <span class="token punctuation" >(</span><span class="token punctuation" >)</span> <span class="token operator" >=</span><span class="token operator" >></span> <span class="token punctuation" >{</span><span class="token punctuation" >}</span> <span class="token punctuation" >:</span> <span class="token function" >Devtools</span><span class="token punctuation" >(</span><span class="token punctuation" >)</span><span class="token punctuation" >,</span>
  modules<span class="token punctuation" >:</span> <span class="token punctuation" >{</span>
    <span class="token punctuation" >.</span><span class="token punctuation" >.</span><span class="token punctuation" >.</span>
  <span class="token punctuation" >}</span>
<span class="token punctuation" >}</span><span class="token punctuation" >)</span>

<span class="token keyword" >export</span> <span class="token keyword" >default</span> controller
</code></pre>
</div></div></div><footer class="footer page__footer"><div class="row"><div class="row__col row__col_sw_24 row__col_lw_6"><h4 class="footer__header">ORGANIZATION</h4><a class="link link__control footer__link i-bem" data-bem='{"link":{}}' role="link" href="../contributors">Contributors</a><a class="link link__control footer__link i-bem" data-bem='{"link":{}}' role="link" href="http://www.webpackbin.com">www.webpackbin.com</a><a class="link link__control footer__link i-bem" data-bem='{"link":{}}' role="link" href="http://www.christianalfoni.com">www.christianalfoni.com</a></div><div class="row__col row__col_sw_24 row__col_lw_6 row__col_lo_3"><h4 class="footer__header">ARTICLES AND USEFUL LINKS</h4><a class="link link__control footer__link i-bem" data-bem='{"link":{}}' role="link" href="http://medium.com/p/5793c08db2cc">The story of Cerebral</a><a class="link link__control footer__link i-bem" data-bem='{"link":{}}' role="link" href="https://gist.github.com/christianalfoni/b08a99faa09df054afe87528a2134730">An unlikely success story</a></div><div class="row__col row__col_sw_24 row__col_lw_6 row__col_lo_6"><h4 class="footer__header">HELP</h4><a class="link link__control footer__link i-bem" data-bem='{"link":{}}' role="link" href="https://github.com/cerebral/cerebral">Cerebral github repo</a><a class="link link__control footer__link i-bem" data-bem='{"link":{}}' role="link" href="https://discord.gg/0kIweV4bd2bwwsvH">Discord chat</a></div></div></footer><script src="../js/scripts.min.js"></script></body></html>